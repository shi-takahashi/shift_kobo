# ã‚·ãƒ•ãƒˆå·¥æˆ¿ ã‚ªãƒ³ãƒ©ã‚¤ãƒ³åŒ– é–‹ç™ºè¨ˆç”»

## ğŸ“‹ å®Ÿè£…æ–¹é‡ã‚µãƒãƒªãƒ¼ï¼ˆ2025-10-16æ›´æ–°ï¼‰

### ä¸»è¦æ±ºå®šäº‹é …
- âœ… **å®Œå…¨ã‚ªãƒ³ãƒ©ã‚¤ãƒ³åŒ–**: Hiveå®Œå…¨å‰Šé™¤ã€Firestoreã®ã¿ä½¿ç”¨
- âœ… **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ**: Firestoreã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ã®ã¿ï¼ˆ`persistenceEnabled: true`ï¼‰
- âœ… **èªè¨¼**: Firebase Authenticationï¼ˆEmail/Passwordï¼‰
- âœ… **ãƒ‡ãƒ¼ã‚¿ç§»è¡Œæˆ¦ç•¥**: **æ¡ˆAæ¡ç”¨** - æ—¢å­˜ã‚¢ãƒ—ãƒªã‚’å®Œå…¨ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ç§»è¡Œï¼ˆã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ä»˜ãï¼‰
  - æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ â†’ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ â†’ ãƒãƒ¼ãƒ ä½œæˆ â†’ **ãƒãƒ¼ãƒ ä½œæˆæ™‚ã«è‡ªå‹•ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ**
  - æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼: é€šå¸¸ã®ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ãƒ•ãƒ­ãƒ¼
  - Hive â†’ Firestoreè‡ªå‹•ç§»è¡Œï¼ˆ**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ä½•ã‚‚ã—ãªãã¦OK**ã€ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä¸è¦ï¼‰
  - ç§»è¡Œå®Œäº†å¾Œã«Hiveãƒ‡ãƒ¼ã‚¿è‡ªå‹•å‰Šé™¤
- âœ… **è‡ªå‹•ç”Ÿæˆ**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè¡Œï¼ˆæ—¢å­˜ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ç¶­æŒï¼‰
- âœ… **åºƒå‘Š**: Androidç‰ˆã¯AdMobï¼ˆãƒ¡ã‚¤ãƒ³åç›Šæºï¼‰ã€Webç‰ˆã¯AdSenseï¼ˆèµ¤å­—è¦šæ‚Ÿï¼‰
- âœ… **é–‹ç™ºæœŸé–“**: 7é€±é–“ï¼ˆAndroidç‰ˆï¼‰+ 2é€±é–“ï¼ˆWebç‰ˆï¼‰
- âœ… **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æˆ¦ç•¥**:
  - Androidç‰ˆã‚¢ãƒ—ãƒªï¼ˆç®¡ç†è€…+ãƒ¡ãƒ³ãƒãƒ¼å…¨å“¡ï¼‰â†’ ãƒ¡ã‚¤ãƒ³
  - Webç‰ˆï¼ˆiOSãƒ¦ãƒ¼ã‚¶ãƒ¼æ•‘æ¸ˆï¼‰â†’ æš«å®š
  - iOSç‰ˆã‚¢ãƒ—ãƒªï¼ˆæ¡ç®—ãƒ©ã‚¤ãƒ³åˆ°é”å¾Œï¼‰â†’ Webç‰ˆã‚¯ãƒ­ãƒ¼ã‚º

### ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã®è‡ªå‹•åŒ–æ–¹é‡ï¼ˆé‡è¦ï¼‰
**æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½“é¨“**:
1. ã‚¢ãƒ—ãƒªæ›´æ–°å¾Œã€èµ·å‹•ã™ã‚‹ã¨ **ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢** ãŒè¡¨ç¤ºã•ã‚Œã‚‹
2. ã€Œã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆã—ã¦å§‹ã‚ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ— â†’ ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ç”»é¢
3. ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦æ–°è¦ç™»éŒ²
4. ãƒãƒ¼ãƒ åã‚’å…¥åŠ›ã—ã¦ãƒãƒ¼ãƒ ä½œæˆ
5. **ãƒãƒ¼ãƒ ä½œæˆå®Œäº†å¾Œã€è‡ªå‹•çš„ã«æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ï¼ˆHiveï¼‰ã‚’Firestoreã«ç§»è¡Œ**
6. ç§»è¡Œé€²æ—ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤ºï¼ˆãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ + å®Œäº†ä»¶æ•°ï¼‰
7. ç§»è¡Œå®Œäº† â†’ Hiveãƒ‡ãƒ¼ã‚¿è‡ªå‹•å‰Šé™¤ â†’ ãƒ›ãƒ¼ãƒ ç”»é¢ã¸
8. **ä»¥é™ã¯ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ç‰ˆã¨ã—ã¦åˆ©ç”¨** ğŸ‰

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã™ã‚‹ã“ã¨**:
- ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆï¼ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›ï¼‰
- ãƒãƒ¼ãƒ åå…¥åŠ›

**ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã—ãªãã¦ã„ã„ã“ã¨**:
- âŒ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- âŒ ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ
- âŒ ç§»è¡Œãƒœã‚¿ãƒ³æŠ¼ä¸‹
- âŒ é›£ã—ã„æ“ä½œã¯ä¸€åˆ‡ãªã—

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
```
Firebase Core 3.3.0
â”œâ”€ Firebase Auth 5.1.4 (Email/Passwordèªè¨¼)
â”œâ”€ Cloud Firestore 5.2.1 (ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ + ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã‚­ãƒ£ãƒƒã‚·ãƒ¥)
â””â”€ Firebase Messaging 15.0.4 (Pushé€šçŸ¥åŸºç›¤)

å‰Šé™¤äºˆå®š
â”œâ”€ Hive
â””â”€ Hive Flutter
```

### å®Ÿè£…å¯èƒ½æ€§
**âœ… å®Ÿè£…å¯èƒ½** - ä¸»ãªç†ç”±:
1. æ—¢å­˜ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ§‹é€ ãŒå®Œç’§ï¼ˆtoJson/fromJsonå®Œå‚™ï¼‰
2. Provideræ§‹é€ ã¯ç¶­æŒã€ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®ã¿å¤‰æ›´
3. æ—¢å­˜ãƒ¢ãƒ‡ãƒ«ãŒãã®ã¾ã¾ä½¿ãˆã‚‹
4. Firebaseç„¡æ–™æ ã§å°è¦æ¨¡ãƒãƒ¼ãƒ å¯¾å¿œå¯èƒ½

---

## 1. é–‹ç™ºç›®çš„
- æ—¢å­˜ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ç‰ˆï¼ˆç®¡ç†è€…å°‚ç”¨ï¼‰ã‚’**å®Œå…¨ã‚ªãƒ³ãƒ©ã‚¤ãƒ³åŒ–**
- ç®¡ç†è€…ãƒ»ãƒ¡ãƒ³ãƒãƒ¼ã®æ¨©é™åˆ†é›¢
- ãƒãƒ¼ãƒ å˜ä½ã§ã®ã‚·ãƒ•ãƒˆå…±æœ‰
- ä¼‘ã¿å¸Œæœ›å…¥åŠ›ãƒ»ç· ã‚æ—¥ç®¡ç†
- å¹´å†…ãƒªãƒªãƒ¼ã‚¹ã‚’ç›®æ¨™
- **æ±ºå®šäº‹é …**: Hiveå®Œå…¨å‰Šé™¤ã€Firestoreã®ã¿ä½¿ç”¨ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ã§ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œï¼‰

## 2. ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™è¨­è¨ˆ

| ç¨®åˆ¥ | æ¨©é™ |
|------|------|
| ç®¡ç†è€… | ã‚·ãƒ•ãƒˆä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤ã€ä¼‘ã¿å¸Œæœ›ç¢ºèªãƒ»æ‰¿èªã€ãƒãƒ¼ãƒ ç®¡ç†ã€ç· ã‚æ—¥è¨­å®š |
| ãƒ¡ãƒ³ãƒãƒ¼ | ã‚·ãƒ•ãƒˆé–²è¦§ã€ä¼‘ã¿å¸Œæœ›å…¥åŠ›ï¼ˆç· ã‚æ—¥ã¾ã§ï¼‰ |

æ¨©é™ã«ã‚ˆã‚‹ç”»é¢ãƒ»æ“ä½œåˆ¶å¾¡ï¼š
- ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ãƒ¼ãƒ«åˆ¤å®šï¼ˆFirebase Authentication + Firestoreï¼‰
- ç®¡ç†è€…ï¼šå…¨æ“ä½œå¯èƒ½
- ãƒ¡ãƒ³ãƒãƒ¼ï¼šã‚·ãƒ•ãƒˆé–²è¦§ï¼‹è‡ªåˆ†ã®ä¼‘ã¿å¸Œæœ›ã®ã¿å…¥åŠ›ã€ç· ã‚æ—¥å¾Œã¯å…¥åŠ›ä¸å¯
- UIä¸Šã§ã‚‚æ¨©é™ã«å¿œã˜ã¦è¡¨ç¤ºåˆ‡æ›¿ãƒ»å…¥åŠ›éæ´»æ€§åŒ–

## 3. ä¼‘ã¿å¸Œæœ›ãƒ»ç· ã‚æ—¥ãƒ«ãƒ¼ãƒ«
- ã‚·ãƒ•ãƒˆå˜ä½ã¾ãŸã¯æœˆå˜ä½ã§ç· ã‚æ—¥ã‚’è¨­å®š
- ãƒ¡ãƒ³ãƒãƒ¼ã¯ç· ã‚æ—¥ã¾ã§ä¼‘ã¿å¸Œæœ›ã‚’å…¥åŠ›å¯èƒ½
- ç· ã‚æ—¥å¾Œã¯ç®¡ç†è€…ã®ã¿ç·¨é›†å¯èƒ½
- Firestoreã§ç· ã‚æ—¥ç®¡ç†ã€ã‚¢ãƒ—ãƒªå´ã§å…¥åŠ›åˆ¶å¾¡

## 4. Firestoreæ§‹é€ è¨­è¨ˆï¼ˆè©³ç´°ç‰ˆï¼‰

### 4.1 ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³æ§‹é€ 

```
users/{userId}
  - uid: string (Firebase Auth UID)
  - email: string
  - displayName: string
  - role: "admin" | "member"
  - teamId: string (æ‰€å±ãƒãƒ¼ãƒ ID)
  - createdAt: timestamp
  - updatedAt: timestamp

teams/{teamId}
  - name: string (ãƒãƒ¼ãƒ å)
  - ownerId: string (ä½œæˆè€…ã®userId)
  - adminIds: string[] (ç®¡ç†è€…ã®uidãƒªã‚¹ãƒˆ)
  - memberIds: string[] (ãƒ¡ãƒ³ãƒãƒ¼ã®uidãƒªã‚¹ãƒˆ)
  - shiftDeadline: timestamp (ä¼‘ã¿å¸Œæœ›ç· ã‚æ—¥)
  - createdAt: timestamp
  - updatedAt: timestamp

  /staff/{staffId}  (ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³)
    - id: string (æ—¢å­˜ã®staffIdç¶­æŒ)
    - userId: string | null (ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ç´ã¥ã‘ã€æœªç™»éŒ²ãªã‚‰null)
    - name: string
    - phoneNumber: string
    - email: string
    - maxShiftsPerMonth: int
    - isActive: bool
    - preferredDaysOff: int[] (æ›œæ—¥: 1-7)
    - unavailableShiftTypes: string[]
    - specificDaysOff: string[] (ISO8601æ—¥ä»˜)
    - createdAt: timestamp
    - updatedAt: timestamp

  /shifts/{shiftId}  (ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³)
    - id: string
    - date: timestamp
    - staffId: string
    - shiftType: string
    - startTime: timestamp
    - endTime: timestamp
    - note: string
    - createdAt: timestamp
    - updatedAt: timestamp

  /constraints/{constraintId}  (ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³) - ã€å»ƒæ­¢äºˆå®šã€‘
    - id: string
    - staffId: string
    - date: timestamp
    - isAvailable: bool
    - reason: string
    - createdAt: timestamp
    - updatedAt: timestamp

  /constraint_requests/{requestId}  (ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³) - ğŸ†• **æ‰¿èªãƒ•ãƒ­ãƒ¼ç”¨**
    - id: string
    - staffId: string (ç”³è«‹è€…ã®ã‚¹ã‚¿ãƒƒãƒ•ID)
    - userId: string (ç”³è«‹è€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID)
    - requestType: string ("specificDay" | "weekday" | "shiftType")
    - specificDate: timestamp | null (ç‰¹å®šæ—¥ã®å ´åˆ)
    - weekday: int | null (æ›œæ—¥ã®å ´åˆ: 1-7)
    - shiftType: string | null (ã‚·ãƒ•ãƒˆã‚¿ã‚¤ãƒ—ã®å ´åˆ)
    - status: string ("pending" | "approved" | "rejected")
    - approvedBy: string | null (æ‰¿èªè€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID)
    - approvedAt: timestamp | null (æ‰¿èªæ—¥æ™‚)
    - rejectedReason: string | null (å´ä¸‹ç†ç”±)
    - createdAt: timestamp
    - updatedAt: timestamp

  /shift_time_settings/{settingId}  (ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³)
    - shiftType: int (enum index)
    - customName: string
    - startTime: string ("HH:mm")
    - endTime: string ("HH:mm")
    - isActive: bool

  /shift_requirements/{shiftType}  (ã‚µãƒ–ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³)
    - shiftType: string
    - requiredCount: int (1æ—¥ã‚ãŸã‚Šå¿…è¦äººæ•°)
```

### 4.2 æ—¢å­˜ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰ã®ç§»è¡Œãƒãƒƒãƒ”ãƒ³ã‚°

| æ—¢å­˜ (Hive) | ç§»è¡Œå…ˆ (Firestore) |
|-------------|-------------------|
| staff Box | teams/{teamId}/staff |
| shifts Box | teams/{teamId}/shifts |
| constraints Box | teams/{teamId}/constraints |
| shift_time_settings Box | teams/{teamId}/shift_time_settings |
| SharedPreferences (shift_requirement_*) | teams/{teamId}/shift_requirements |

### 4.3 Security Rules

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
    match /users/{userId} {
      allow read: if request.auth.uid == userId
                  || get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == 'admin';
      allow write: if request.auth.uid == userId;
    }

    // ãƒãƒ¼ãƒ æƒ…å ±
    match /teams/{teamId} {
      allow read: if request.auth.uid in resource.data.adminIds
                  || request.auth.uid in resource.data.memberIds;
      allow write: if request.auth.uid in resource.data.adminIds;

      // ã‚¹ã‚¿ãƒƒãƒ•æƒ…å ±ï¼ˆãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼å…¨å“¡ãŒé–²è¦§ã€ç®¡ç†è€…ã®ã¿ç·¨é›†ï¼‰
      match /staff/{staffId} {
        allow read: if request.auth.uid in get(/databases/$(database)/documents/teams/$(teamId)).data.memberIds;
        allow write: if request.auth.uid in get(/databases/$(database)/documents/teams/$(teamId)).data.adminIds;
      }

      // ã‚·ãƒ•ãƒˆæƒ…å ±ï¼ˆãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼å…¨å“¡ãŒé–²è¦§ã€ç®¡ç†è€…ã®ã¿ç·¨é›†ï¼‰
      match /shifts/{shiftId} {
        allow read: if request.auth.uid in get(/databases/$(database)/documents/teams/$(teamId)).data.memberIds;
        allow write: if request.auth.uid in get(/databases/$(database)/documents/teams/$(teamId)).data.adminIds;
      }

      // ä¼‘ã¿å¸Œæœ›ï¼ˆè‡ªåˆ†ã®ã‚‚ã®ã¯ç·¨é›†å¯ã€ç· ã‚æ—¥å¾Œã¯ç®¡ç†è€…ã®ã¿ï¼‰- ã€å»ƒæ­¢äºˆå®šã€‘
      match /constraints/{constraintId} {
        allow read: if request.auth.uid in get(/databases/$(database)/documents/teams/$(teamId)).data.memberIds;
        allow create, update: if (request.auth.uid in get(/databases/$(database)/documents/teams/$(teamId)).data.memberIds
                                  && request.resource.data.staffId == get(/databases/$(database)/documents/users/$(request.auth.uid)).data.staffId
                                  && request.time < get(/databases/$(database)/documents/teams/$(teamId)).data.shiftDeadline)
                                  || request.auth.uid in get(/databases/$(database)/documents/teams/$(teamId)).data.adminIds;
        allow delete: if request.auth.uid in get(/databases/$(database)/documents/teams/$(teamId)).data.adminIds;
      }

      // ğŸ†• ä¼‘ã¿å¸Œæœ›ç”³è«‹ï¼ˆæ‰¿èªãƒ•ãƒ­ãƒ¼ï¼‰
      match /constraint_requests/{requestId} {
        // å…¨å“¡ãŒé–²è¦§å¯èƒ½ï¼ˆç®¡ç†è€…ï¼šå…¨ä»¶ã€ã‚¹ã‚¿ãƒƒãƒ•ï¼šè‡ªåˆ†ã®ç”³è«‹ã®ã¿ï¼‰
        allow read: if request.auth.uid in get(/databases/$(database)/documents/teams/$(teamId)).data.memberIds;

        // ç”³è«‹ä½œæˆï¼šã‚¹ã‚¿ãƒƒãƒ•è‡ªèº«ã®ã¿ï¼ˆç· ã‚æ—¥å‰ã®ã¿ï¼‰
        allow create: if request.auth.uid in get(/databases/$(database)/documents/teams/$(teamId)).data.memberIds
                         && request.resource.data.userId == request.auth.uid
                         && request.time < get(/databases/$(database)/documents/teams/$(teamId)).data.shiftDeadline;

        // ç”³è«‹æ›´æ–°ï¼šç®¡ç†è€…ã®ã¿ï¼ˆæ‰¿èªãƒ»å´ä¸‹æ“ä½œï¼‰
        allow update: if request.auth.uid in get(/databases/$(database)/documents/teams/$(teamId)).data.adminIds
                         && request.resource.data.keys().hasAny(['status', 'approvedBy', 'approvedAt', 'rejectedReason']);

        // ç”³è«‹å‰Šé™¤ï¼šæœ¬äººã¾ãŸã¯ç®¡ç†è€…
        allow delete: if request.resource.data.userId == request.auth.uid
                         || request.auth.uid in get(/databases/$(database)/documents/teams/$(teamId)).data.adminIds;
      }

      // ã‚·ãƒ•ãƒˆæ™‚é–“è¨­å®šãƒ»æœˆé–“ã‚·ãƒ•ãƒˆè¨­å®šï¼ˆç®¡ç†è€…ã®ã¿ç·¨é›†ï¼‰
      match /shift_time_settings/{settingId} {
        allow read: if request.auth.uid in get(/databases/$(database)/documents/teams/$(teamId)).data.memberIds;
        allow write: if request.auth.uid in get(/databases/$(database)/documents/teams/$(teamId)).data.adminIds;
      }

      match /shift_requirements/{requirementId} {
        allow read: if request.auth.uid in get(/databases/$(database)/documents/teams/$(teamId)).data.memberIds;
        allow write: if request.auth.uid in get(/databases/$(database)/documents/teams/$(teamId)).data.adminIds;
      }
    }
  }
}
```

## 5. å¹´å†…ãƒªãƒªãƒ¼ã‚¹å‘ã‘æ©Ÿèƒ½æ•´ç†

### å¿…é ˆæ©Ÿèƒ½ï¼ˆãƒªãƒªãƒ¼ã‚¹å‰ã«å®Ÿè£…ï¼‰
- âœ… ç®¡ç†è€…ãƒ»ãƒ¡ãƒ³ãƒãƒ¼æ¨©é™ã«ã‚ˆã‚‹ãƒ­ã‚°ã‚¤ãƒ³
- âœ… ç®¡ç†è€…ï¼šã‚·ãƒ•ãƒˆä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤
- âœ… ãƒ¡ãƒ³ãƒãƒ¼ï¼šã‚·ãƒ•ãƒˆé–²è¦§ã€ä¼‘ã¿å¸Œæœ›å…¥åŠ›ï¼ˆç· ã‚æ—¥ã¾ã§ï¼‰
- âœ… **ãƒãƒ¼ãƒ æ‹›å¾…æ©Ÿèƒ½ï¼ˆæ‹›å¾…ã‚³ãƒ¼ãƒ‰æ–¹å¼ï¼‰** â† **è¿½åŠ ï¼šãƒªãƒªãƒ¼ã‚¹å¿…é ˆ**
- âœ… ç· ã‚æ—¥åˆ¶å¾¡ï¼ˆä¼‘ã¿å¸Œæœ›å…¥åŠ›æœŸé™ï¼‰
- âœ… ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ç‰ˆã‹ã‚‰Firebaseã¸ã®ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ
- âœ… åŸºæœ¬UIï¼ˆæ¨©é™ã«å¿œã˜ãŸç”»é¢åˆ‡æ›¿ï¼‰

### Pushé€šçŸ¥
- é€ä¿¡ä»•çµ„ã¿ã®ã¿æº–å‚™ï¼ˆFirebase Cloud Messagingï¼‰
- ãƒªãƒªãƒ¼ã‚¹æ®µéšã§ã¯é€šçŸ¥é€ä¿¡ã¯å¾Œå›ã—

### å¾Œå›ã—æ©Ÿèƒ½ï¼ˆãƒªãƒªãƒ¼ã‚¹å¾Œè¿½åŠ ï¼‰
- å®Ÿéš›ã®ã‚·ãƒ•ãƒˆå¤‰æ›´é€šçŸ¥
- QRã‚³ãƒ¼ãƒ‰æ‹›å¾…ï¼ˆæ‹›å¾…ã‚³ãƒ¼ãƒ‰ã®ã¿ã§ååˆ†ï¼‰
- ãƒ¡ãƒ¼ãƒ«æ‹›å¾…ãƒªãƒ³ã‚¯
- åºƒå‘Šåç›Šãƒ»æœ‰æ–™ç‰ˆ
- é«˜åº¦ãªUIæ”¹å–„ãƒ»æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µ

## 6. é–‹ç™ºãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ï¼ˆ1äººé–‹ç™ºæƒ³å®šãƒ»7é€±é–“ï¼‰

| é€± | ãƒ•ã‚§ãƒ¼ã‚º | ã‚¿ã‚¹ã‚¯è©³ç´° | é‡è¦åº¦ |
|----|---------|-----------|--------|
| **1é€±ç›®** | FirebaseåŸºç›¤ | âœ… FirebaseåˆæœŸè¨­å®šï¼ˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ»Android/iOSè¨­å®šï¼‰<br>âœ… Firebase Authå®Ÿè£…ï¼ˆEmail/Passwordï¼‰<br>âœ… ãƒ­ã‚°ã‚¤ãƒ³/ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ç”»é¢ä½œæˆ<br>âœ… ãƒãƒ¼ãƒ ä½œæˆç”»é¢<br>âœ… FirestoreåŸºæœ¬æ¥ç¶šç¢ºèª | â­â­â­ |
| **2é€±ç›®** | ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ | âœ… **ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢å®Ÿè£…**ï¼ˆMigrationOnboardingScreenï¼‰<br>âœ… æ—¢å­˜ãƒ‡ãƒ¼ã‚¿æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯ï¼ˆHiveæœ‰ç„¡ãƒã‚§ãƒƒã‚¯ï¼‰<br>âœ… MigrationServiceä½œæˆ<br>âœ… Hiveâ†’Firestoreè‡ªå‹•ç§»è¡Œæ©Ÿèƒ½<br>âœ… ç§»è¡Œé€²æ—è¡¨ç¤ºUI<br>âœ… ç§»è¡Œãƒ†ã‚¹ãƒˆï¼ˆã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ï¼‰<br>âœ… Hiveå‰Šé™¤å‡¦ç† | â­â­â­ |
| **3é€±ç›®** | Provideræ”¹ä¿® | âœ… Provideræ”¹ä¿®ï¼ˆFirestoreå¯¾å¿œï¼‰<br>âœ… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”»é¢ã®Firestoreé€£æº<br>âœ… ã‚·ãƒ•ãƒˆCRUDæ©Ÿèƒ½ï¼ˆFirestoreç‰ˆï¼‰<br>âœ… ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç†ã®Firestoreé€£æº<br>âœ… ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒã®Firestoreå¯¾å¿œ | â­â­â­ |
| **4é€±ç›®** | æ‹›å¾…æ©Ÿèƒ½ + è‡ªå‹•ç´ä»˜ã‘ | âœ… ãƒãƒ¼ãƒ æ‹›å¾…ã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ©Ÿèƒ½<br>âœ… æ‹›å¾…ã‚³ãƒ¼ãƒ‰å…¥åŠ›ç”»é¢<br>âœ… ãƒãƒ¼ãƒ å‚åŠ å‡¦ç†ï¼ˆFirestoreæ›´æ–°ï¼‰<br>âœ… ã‚¹ã‚¿ãƒƒãƒ•-ãƒ¦ãƒ¼ã‚¶ãƒ¼è‡ªå‹•ç´ä»˜ã‘ï¼ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ä¸€è‡´ï¼‰<br>âœ… æ‹›å¾…æ¡ˆå†…UXæ”¹å–„ï¼ˆInviteGuideDialogï¼‰<br>âœ… ç”¨èªçµ±ä¸€ï¼ˆã€Œãƒ¡ãƒ³ãƒãƒ¼ã€â†’ã€Œã‚¹ã‚¿ãƒƒãƒ•ã€ï¼‰ | â­â­â­ |
| **5é€±ç›®** | æ¨©é™åˆ¶å¾¡ + ãƒã‚¤ãƒšãƒ¼ã‚¸ | âœ… AppUser.roleã«ã‚ˆã‚‹æ¨©é™åˆ¶å¾¡å®Ÿè£…<br>âœ… ãƒ›ãƒ¼ãƒ ç”»é¢ã®ã‚¿ãƒ–æ§‹æˆå¤‰æ›´ï¼ˆæ¨©é™åˆ¥ï¼‰<br>âœ… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”»é¢ã®æ¨©é™åˆ¶å¾¡ï¼ˆç®¡ç†è€…ï¼šç·¨é›†å¯ã€ã‚¹ã‚¿ãƒƒãƒ•ï¼šé–²è¦§ã®ã¿ï¼‰<br>âœ… è¨­å®šç”»é¢ã®æ¨©é™åˆ¶å¾¡ï¼ˆç®¡ç†è€…å°‚ç”¨æ©Ÿèƒ½ã®éè¡¨ç¤ºï¼‰<br>âœ… ãƒã‚¤ãƒšãƒ¼ã‚¸ç”»é¢ä½œæˆï¼ˆç›´è¿‘ã®äºˆå®šãƒ»å…¨äºˆå®šã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ»ä¼‘ã¿å¸Œæœ›ç·¨é›†ï¼‰<br>âœ… ãƒã‚¤ãƒšãƒ¼ã‚¸UIèª¿æ•´ï¼ˆã‚¹ãƒ¯ã‚¤ãƒ—ç„¡åŠ¹åŒ–ã€ãƒãƒƒãƒ—å›ºå®šå¹…ã€ãƒ‡ãƒ¼ã‚¿å½¢å¼çµ±ä¸€ï¼‰ | â­â­â­ |
| **6é€±ç›®** | âœ… **ä¼‘ã¿å¸Œæœ›æ‰¿èªãƒ•ãƒ­ãƒ¼** | âœ… **ConstraintRequestãƒ¢ãƒ‡ãƒ«ä½œæˆ**ï¼ˆstatus: pending/approved/rejectedï¼‰<br>âœ… **ã‚¹ã‚¿ãƒƒãƒ•å´ï¼šä¼‘ã¿å¸Œæœ›ç”³è«‹æ©Ÿèƒ½**ï¼ˆç‰¹å®šæ—¥ãƒ»æ›œæ—¥ãƒ»ã‚·ãƒ•ãƒˆã‚¿ã‚¤ãƒ—åˆ¥ï¼‰<br>âœ… **ç®¡ç†è€…å´ï¼šæ‰¿èªç”»é¢ä½œæˆ**ï¼ˆç”³è«‹ä¸€è¦§ãƒ»æ‰¿èª/å´ä¸‹ãƒœã‚¿ãƒ³ï¼‰<br>âœ… **ç”³è«‹çŠ¶æ…‹è¡¨ç¤º**ï¼ˆãƒã‚¤ãƒšãƒ¼ã‚¸ã§æ‰¿èªå¾…ã¡ãƒ»æ‰¿èªæ¸ˆã¿ãƒ»å´ä¸‹ã‚’è‰²åˆ†ã‘è¡¨ç¤ºï¼‰<br>âœ… **Firestoreæ§‹é€ æ‹¡å¼µ**ï¼ˆteams/{teamId}/constraint_requests ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼‰<br>âœ… **Security Rulesæ›´æ–°**ï¼ˆç”³è«‹ã¯æœ¬äººã®ã¿ä½œæˆã€æ‰¿èªã¯ç®¡ç†è€…ã®ã¿ï¼‰<br>âœ… **ãƒã‚¤ãƒšãƒ¼ã‚¸è¡¨ç¤ºæœ€é©åŒ–**ï¼ˆã‚«ãƒ¼ãƒ‰ä¸¦ã³æ›¿ãˆã€1é€±é–“åˆ†ã®ç›´è¿‘äºˆå®šã€ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å¹´æœˆè¡¨ç¤ºï¼‰<br>â¸ï¸ FCMåŸºç›¤æº–å‚™ï¼ˆå°†æ¥å¯¾å¿œï¼‰<br>â¸ï¸ ç· ã‚æ—¥åˆ¶å¾¡å®Ÿè£…ï¼ˆå°†æ¥å¯¾å¿œï¼‰ | â­â­â­ |
| **7é€±ç›®** | ğŸ”¥ **ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒªãƒªãƒ¼ã‚¹æº–å‚™** | âœ… **Firebaseé–‹ç™º/æœ¬ç•ªç’°å¢ƒåˆ†é›¢**<br>ãƒ»æœ¬ç•ªç”¨Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ<br>ãƒ»google-services.json é–‹ç™º/æœ¬ç•ªåˆ‡ã‚Šæ›¿ãˆ<br>âœ… **iOSç”¨Webã‚¢ãƒ—ãƒªæº–å‚™**<br>ãƒ»Flutter Web ãƒ“ãƒ«ãƒ‰è¨­å®š<br>ãƒ»PWAå¯¾å¿œï¼ˆmanifest.jsonã€service workerï¼‰<br>ãƒ»Firebase Hosting ãƒ‡ãƒ—ãƒ­ã‚¤<br>âœ… **å€‹äººæƒ…å ±æš—å·åŒ–å¯¾å¿œ**<br>ãƒ»ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒ»é›»è©±ç•ªå·ã®æš—å·åŒ–å®Ÿè£…<br>âœ… **ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼æ›´æ–°**<br>ãƒ»Firebaseåˆ©ç”¨ãƒ»ãƒãƒ¼ãƒ æ©Ÿèƒ½è¨˜è¼‰è¿½åŠ <br>âœ… **ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°å‰Šé™¤**<br>ãƒ»debugPrintæ¡ä»¶åˆ†å²ã€æœªä½¿ç”¨ã‚³ãƒ¼ãƒ‰å‰Šé™¤ | â­â­â­ |
| **8é€±ç›®** | ãƒ†ã‚¹ãƒˆãƒ»èª¿æ•´ | ãƒ»æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã®ç§»è¡Œãƒ†ã‚¹ãƒˆ<br>ãƒ»æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã®å‹•ä½œç¢ºèª<br>ãƒ»æ‹›å¾…æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ<br>ãƒ»æ‰¿èªãƒ•ãƒ­ãƒ¼ãƒ†ã‚¹ãƒˆï¼ˆç”³è«‹â†’æ‰¿èªã®ä¸€é€£ãƒ•ãƒ­ãƒ¼ï¼‰<br>ãƒ»iOS Webç‰ˆå‹•ä½œç¢ºèª<br>ãƒ»UIèª¿æ•´ãƒ»ãƒã‚°ä¿®æ­£ | â­â­ |
| **9é€±ç›®** | ãƒªãƒªãƒ¼ã‚¹æº–å‚™ | ãƒ»å°‘äººæ•°ãƒ†ã‚¹ãƒˆãƒãƒ¼ãƒ æ¤œè¨¼ï¼ˆAndroid + iOS Webï¼‰<br>ãƒ»æœ¬ç•ªFirebaseç’°å¢ƒã§ã®ãƒ†ã‚¹ãƒˆ<br>ãƒ»Security Rulesæœ€çµ‚ç¢ºèª<br>ãƒ»ãƒã‚°ä¿®æ­£<br>ãƒ»ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆä½œæˆ<br>ãƒ»ã‚¹ãƒˆã‚¢ç”³è«‹æº–å‚™ï¼ˆGoogle Play + Firebase Hostingï¼‰ | â­ |

**åˆè¨ˆ**: 9é€±é–“ï¼ˆç´„63æ—¥ï¼‰â† æ‰¿èªãƒ•ãƒ­ãƒ¼æ©Ÿèƒ½è¿½åŠ ã«ã‚ˆã‚Š7é€±é–“â†’9é€±é–“ã«å»¶é•·

### ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒªãƒªãƒ¼ã‚¹ã«å…¥ã‚Œã‚‹ã‹æ¤œè¨ä¸­

| æ©Ÿèƒ½ | èª¬æ˜ | å„ªå…ˆåº¦ |
|------|------|--------|
| **æ‰‹å‹•ç·¨é›†æ™‚ã®å¸Œæœ›å¤–ã‚·ãƒ•ãƒˆè­¦å‘Š** | ã‚·ãƒ•ãƒˆç·¨é›†æ™‚ã€ã‚¹ã‚¿ãƒƒãƒ•ã®ä¼‘ã¿å¸Œæœ›ã¨çŸ›ç›¾ã™ã‚‹å ´åˆã«è­¦å‘Šè¡¨ç¤º<br>ãƒ»preferredDaysOffã€unavailableShiftTypes ã‚’ãƒã‚§ãƒƒã‚¯<br>ãƒ»è­¦å‘Šãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤ºï¼ˆç„¡è¦–ã—ã¦ä¿å­˜ã‚‚å¯èƒ½ï¼‰ | â­â­ |

---

## ğŸ”® ã‚»ã‚«ãƒ³ãƒ‰ãƒªãƒªãƒ¼ã‚¹ä»¥é™ã®æ©Ÿèƒ½ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### å„ªå…ˆåº¦é †ã®æ©Ÿèƒ½ãƒªã‚¹ãƒˆ

| å„ªå…ˆåº¦ | æ©Ÿèƒ½ | èª¬æ˜ | å®Ÿè£…å·¥æ•°ç›®å®‰ |
|--------|------|------|-------------|
| â­â­â­ | **Pushé€šçŸ¥æ©Ÿèƒ½ï¼ˆFCMï¼‰** | ãƒ»æ‰¿èªãƒ»å´ä¸‹é€šçŸ¥ï¼ˆã‚¹ã‚¿ãƒƒãƒ•å‘ã‘ï¼‰<br>ãƒ»ç”³è«‹é€šçŸ¥ï¼ˆç®¡ç†è€…å‘ã‘ï¼‰<br>ãƒ»ã‚·ãƒ•ãƒˆç¢ºå®šé€šçŸ¥ï¼ˆå…¨å“¡å‘ã‘ï¼‰<br>ãƒ»FCMåŸºç›¤æº–å‚™ï¼ˆæ—¢ã«å®Œäº†ï¼‰<br>ãƒ»é€šçŸ¥é€ä¿¡å‡¦ç†å®Ÿè£…<br>ãƒ»é€šçŸ¥å—ä¿¡UIå®Ÿè£… | 3-4æ—¥ |
| â­â­â­ | **ä¸€æ‹¬æ‰¿èªæ©Ÿèƒ½** | ãƒ»ã‚¹ã‚¿ãƒƒãƒ•å˜ä½ã§ã¾ã¨ã‚ã¦æ‰¿èªï¼ˆç¾åœ¨ã¯1ä»¶ãšã¤ï¼‰<br>ãƒ»ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã§è¤‡æ•°é¸æŠ<br>ãƒ»ä¸€æ‹¬æ‰¿èªãƒœã‚¿ãƒ³è¿½åŠ <br>ãƒ»Firestore ãƒãƒƒãƒå‡¦ç†ã§é«˜é€Ÿå‡¦ç† | 2-3æ—¥ |
| â­â­ | **è‡ªå‹•æ‰¿èªæ©Ÿèƒ½** | ãƒ»ç®¡ç†è€…å‘ã‘è¨­å®š: å…¨ã‚¹ã‚¿ãƒƒãƒ•è‡ªå‹•æ‰¿èªON/OFF<br>ãƒ»ã‚¹ã‚¿ãƒƒãƒ•å˜ä½ã®è‡ªå‹•æ‰¿èªè¨­å®š<br>ãƒ»ç‰¹å®šæ¡ä»¶ä¸‹ã§ã®è‡ªå‹•æ‰¿èªï¼ˆä¾‹: æœˆXå›ã¾ã§ï¼‰<br>ãƒ»Firestore Cloud Functions ã§è‡ªå‹•æ‰¿èªãƒˆãƒªã‚¬ãƒ¼ | 3-4æ—¥ |
| â­â­ | **ãƒãƒ¼ãƒ åå¤‰æ›´æ©Ÿèƒ½** | ãƒ»è¨­å®šç”»é¢ã‹ã‚‰ãƒãƒ¼ãƒ åã‚’å¤‰æ›´å¯èƒ½<br>ãƒ»Firestore teams/{teamId}/name ã‚’æ›´æ–°<br>ãƒ»å¤‰æ›´å±¥æ­´ã®è¨˜éŒ²ï¼ˆä»»æ„ï¼‰ | 1æ—¥ |
| â­â­ | **ç¥æ—¥å‹¤å‹™ä¸å¯è¨­å®š** | ãƒ»ã‚¹ã‚¿ãƒƒãƒ•æ¯ã«ç¥æ—¥å‹¤å‹™ä¸å¯ãƒ•ãƒ©ã‚°è¿½åŠ <br>ãƒ»è‡ªå‹•å‰²ã‚Šå½“ã¦æ™‚ã«ç¥æ—¥ã‚’è€ƒæ…®<br>ãƒ»holiday_jp ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åˆ©ç”¨ï¼ˆæ—¢ã«å°å…¥æ¸ˆã¿ï¼‰<br>ãƒ»Staff ãƒ¢ãƒ‡ãƒ«ã« canWorkOnHolidays ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ  | 2æ—¥ |
| â­ | **ç· ã‚æ—¥æ©Ÿèƒ½** | ãƒ»è¨­å®šç”»é¢ã§ç· ã‚æ—¥è¨­å®šï¼ˆä¾‹: æ¯æœˆ25æ—¥ï¼‰<br>ãƒ»ç· ã‚æ—¥ä»¥é™ã¯ä¼‘ã¿å¸Œæœ›å…¥åŠ›ã‚’åˆ¶é™<br>ãƒ»ç®¡ç†è€…ã¯åˆ¶é™ãªã—<br>ãƒ»Team ãƒ¢ãƒ‡ãƒ«ã« deadlineDay ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ  | 2-3æ—¥ |
| â­ | **SNSé€£æºï¼ˆAppleãƒ»Googleèªè¨¼ï¼‰** | ãƒ»Apple Sign Inï¼ˆiOSå‘ã‘ï¼‰<br>ãƒ»Google Sign Inï¼ˆAndroidå‘ã‘ï¼‰<br>ãƒ»æ—¢å­˜ã®Email/Passwordèªè¨¼ã¨ä½µç”¨<br>ãƒ»ã‚¹ã‚¿ãƒƒãƒ•è‡ªå‹•ç´ä»˜ã‘ã¯ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒ™ãƒ¼ã‚¹ã§ç¶™ç¶š<br>ãƒ»Firebase Authentication è¨­å®šè¿½åŠ  | 3-4æ—¥ |

### ã‚»ã‚«ãƒ³ãƒ‰ãƒªãƒªãƒ¼ã‚¹å®Ÿè£…é †åºï¼ˆæ¨å¥¨ï¼‰

1. **ä¸€æ‹¬æ‰¿èªæ©Ÿèƒ½**ï¼ˆ2-3æ—¥ï¼‰
   - ç†ç”±: ç®¡ç†è€…ã®æ‰¿èªä½œæ¥­åŠ¹ç‡åŒ–ã€å®Ÿè£…ã‚‚æ¯”è¼ƒçš„ç°¡å˜

2. **ç¥æ—¥å‹¤å‹™ä¸å¯è¨­å®š**ï¼ˆ2æ—¥ï¼‰
   - ç†ç”±: ã‚·ãƒ•ãƒˆè‡ªå‹•ç”Ÿæˆã®ç²¾åº¦å‘ä¸Šã€æ—¢ã«holiday_jpãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å°å…¥æ¸ˆã¿

3. **ãƒãƒ¼ãƒ åå¤‰æ›´æ©Ÿèƒ½**ï¼ˆ1æ—¥ï¼‰
   - ç†ç”±: ç°¡å˜ãªæ©Ÿèƒ½ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æœ›ãŒå¤šã„å¯èƒ½æ€§

4. **Pushé€šçŸ¥æ©Ÿèƒ½**ï¼ˆ3-4æ—¥ï¼‰
   - ç†ç”±: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®å¤§å¹…å‘ä¸Šã€FCMåŸºç›¤ã¯æº–å‚™æ¸ˆã¿

5. **è‡ªå‹•æ‰¿èªæ©Ÿèƒ½**ï¼ˆ3-4æ—¥ï¼‰
   - ç†ç”±: ç®¡ç†è€…ã®è² æ‹…è»½æ¸›ã€Cloud Functions å¿…è¦

6. **ç· ã‚æ—¥æ©Ÿèƒ½**ï¼ˆ2-3æ—¥ï¼‰
   - ç†ç”±: ã‚·ãƒ•ãƒˆç®¡ç†ã®æ­£ç¢ºæ€§å‘ä¸Š

7. **SNSé€£æº**ï¼ˆ3-4æ—¥ï¼‰
   - ç†ç”±: ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ã®éšœå£ã‚’ä¸‹ã’ã‚‹

**åˆè¨ˆ**: 18-25æ—¥ï¼ˆç´„3-4é€±é–“ï¼‰

---

### å®Ÿè£…å„ªå…ˆé †ä½ã¾ã¨ã‚

**ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒªãƒªãƒ¼ã‚¹å®Œäº†é …ç›®ï¼ˆMVPï¼‰**:
1. âœ… Firebase Auth + ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
2. âœ… ãƒãƒ¼ãƒ ä½œæˆæ©Ÿèƒ½
3. âœ… ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢å®Ÿè£…ï¼ˆæ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘æ¡ˆAï¼‰
4. âœ… æ—¢å­˜ãƒ‡ãƒ¼ã‚¿æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯ï¼ˆHiveæœ‰ç„¡ãƒã‚§ãƒƒã‚¯ï¼‰
5. âœ… ãƒ‡ãƒ¼ã‚¿ç§»è¡Œãƒ„ãƒ¼ãƒ«ï¼ˆHiveâ†’Firestoreè‡ªå‹•ç§»è¡Œï¼‰
6. âœ… ç®¡ç†è€…æ©Ÿèƒ½ï¼ˆã‚·ãƒ•ãƒˆCRUDï¼‰ã®Firestoreå¯¾å¿œ
7. âœ… ãƒãƒ¼ãƒ æ‹›å¾…æ©Ÿèƒ½ï¼ˆæ‹›å¾…ã‚³ãƒ¼ãƒ‰æ–¹å¼ï¼‰
8. âœ… ã‚¹ã‚¿ãƒƒãƒ•é–²è¦§æ©Ÿèƒ½
9. âœ… ä¼‘ã¿å¸Œæœ›ç”³è«‹ãƒ»æ‰¿èªæ©Ÿèƒ½
10. âœ… ãƒã‚¤ãƒšãƒ¼ã‚¸ç”»é¢ï¼ˆç›´è¿‘äºˆå®šãƒ»ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ»ä¼‘ã¿å¸Œæœ›ç·¨é›†ï¼‰
11. âœ… æ¨©é™åˆ¶å¾¡ï¼ˆç®¡ç†è€…ãƒ»ã‚¹ã‚¿ãƒƒãƒ•ï¼‰

**ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒªãƒªãƒ¼ã‚¹å‰ã®å¿…é ˆä½œæ¥­**:
- â¸ï¸ Firebaseé–‹ç™º/æœ¬ç•ªç’°å¢ƒåˆ†é›¢
- â¸ï¸ iOSç”¨Webã‚¢ãƒ—ãƒªæº–å‚™
- â¸ï¸ å€‹äººæƒ…å ±æš—å·åŒ–å¯¾å¿œ
- â¸ï¸ ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼æ›´æ–°
- â¸ï¸ ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°å‰Šé™¤

**ã‚»ã‚«ãƒ³ãƒ‰ãƒªãƒªãƒ¼ã‚¹ä»¥é™ï¼ˆä¸Šè¨˜ã€Œã‚»ã‚«ãƒ³ãƒ‰ãƒªãƒªãƒ¼ã‚¹ä»¥é™ã®æ©Ÿèƒ½ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã€å‚ç…§ï¼‰**:
- ä¸€æ‹¬æ‰¿èªæ©Ÿèƒ½
- ç¥æ—¥å‹¤å‹™ä¸å¯è¨­å®š
- ãƒãƒ¼ãƒ åå¤‰æ›´æ©Ÿèƒ½
- Pushé€šçŸ¥æ©Ÿèƒ½
- è‡ªå‹•æ‰¿èªæ©Ÿèƒ½
- ç· ã‚æ—¥æ©Ÿèƒ½
- SNSé€£æºï¼ˆAppleãƒ»Googleèªè¨¼ï¼‰

**ä½å„ªå…ˆï¼ˆå°†æ¥æ¤œè¨ï¼‰**:
- QRã‚³ãƒ¼ãƒ‰æ‹›å¾…ï¼ˆæ‹›å¾…ã‚³ãƒ¼ãƒ‰ã§ååˆ†ï¼‰
- ãƒ¡ãƒ¼ãƒ«æ‹›å¾…ãƒªãƒ³ã‚¯
- æœ‰æ–™ç‰ˆï¼ˆåºƒå‘Šéè¡¨ç¤ºï¼‰

> ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒªãƒªãƒ¼ã‚¹: 9é€±é–“ï¼ˆç´„63æ—¥ï¼‰
> ã‚»ã‚«ãƒ³ãƒ‰ãƒªãƒªãƒ¼ã‚¹: 3-4é€±é–“ï¼ˆç´„18-25æ—¥ï¼‰

## 7. ãƒ‡ãƒ¼ã‚¿ç§»è¡Œæˆ¦ç•¥

### 7.1 ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦–ç‚¹ã®ç§»è¡Œãƒ•ãƒ­ãƒ¼

#### **ã€æ¡ç”¨ã€‘æ¡ˆA: æ—¢å­˜ã‚¢ãƒ—ãƒªã®å®Œå…¨ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ç§»è¡Œï¼ˆã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ä»˜ãï¼‰**

##### æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ™‚ï¼‰

1. **ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå‰ã®æº–å‚™**
   - Google Playã‚¹ãƒˆã‚¢ã®æ›´æ–°æƒ…å ±ã«ç§»è¡Œæ‰‹é †ã‚’è¨˜è¼‰
   - æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®äº‹å‰å‘ŠçŸ¥ï¼ˆã‚¢ãƒ—ãƒªå†…é€šçŸ¥ã¾ãŸã¯æ›´æ–°æƒ…å ±ï¼‰
   - â€»ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¯ä¸è¦ï¼ˆè‡ªå‹•ç§»è¡Œï¼‰

2. **ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå¾Œã®åˆå›èµ·å‹•æ™‚**
   - ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã«Hiveãƒ‡ãƒ¼ã‚¿ã®æœ‰ç„¡ã‚’è‡ªå‹•æ¤œå‡º
   - **æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚ã‚Š** â†’ ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã‚’è¡¨ç¤º
   - **æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ãªã—** â†’ é€šå¸¸ã®ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã¸

3. **ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ï¼ˆMigrationOnboardingScreenï¼‰**
   - ã‚ªãƒ³ãƒ©ã‚¤ãƒ³åŒ–ã®èª¬æ˜
     - ã€Œã‚·ãƒ•ãƒˆå·¥æˆ¿ãŒãƒ‘ãƒ¯ãƒ¼ã‚¢ãƒƒãƒ—ã—ã¾ã—ãŸï¼ã€
     - ãƒ¡ãƒªãƒƒãƒˆï¼šãƒãƒ¼ãƒ ã§ã‚·ãƒ•ãƒˆå…±æœ‰ã€ãƒ¡ãƒ³ãƒãƒ¼ãŒä¼‘ã¿å¸Œæœ›å…¥åŠ›å¯èƒ½ã€è¤‡æ•°ç«¯æœ«ã§åŒæœŸ
     - æ–°æ©Ÿèƒ½ï¼šãƒ¡ãƒ³ãƒãƒ¼æ‹›å¾…ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ã€ãƒ‡ãƒ¼ã‚¿è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
   - ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã®æ¡ˆå†…
     - ã€Œæ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ã¯è‡ªå‹•ã§ç§»è¡Œã•ã‚Œã¾ã™ã€
     - ã€Œã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆå¾Œã€ã™ãã«ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™ã€
   - ã€Œã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆã—ã¦å§‹ã‚ã‚‹ã€ãƒœã‚¿ãƒ³
   - ã€Œå¾Œã§ã€ãƒœã‚¿ãƒ³ï¼ˆã‚¢ãƒ—ãƒªèµ·å‹•ã®ãŸã³ã«è¡¨ç¤ºã€ç§»è¡Œã—ãªã„ã¨ä½¿ãˆãªã„ï¼‰

4. **ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆãƒ»ãƒãƒ¼ãƒ ä½œæˆ**
   - ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ç”»é¢ã¸é·ç§»ï¼ˆEmail/Passwordï¼‰
   - ãƒãƒ¼ãƒ ä½œæˆç”»é¢ã¸é·ç§»
     - ãƒãƒ¼ãƒ åå…¥åŠ›ï¼ˆæ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰åº—èˆ—åã‚’æ¨æ¸¬ã—ã¦ãƒ—ãƒªã‚»ãƒƒãƒˆå¯èƒ½ï¼‰
     - ãƒãƒ¼ãƒ ä½œæˆãƒœã‚¿ãƒ³æŠ¼ä¸‹

5. **ãƒ‡ãƒ¼ã‚¿ç§»è¡Œå®Ÿè¡Œï¼ˆè‡ªå‹•ï¼‰**
   - ãƒãƒ¼ãƒ ä½œæˆå®Œäº†å¾Œã€ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§æ—¢å­˜Hiveãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•æ¤œå‡º
   - MigrationServiceãŒæ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’Firestoreã¸è‡ªå‹•ç§»è¡Œ
   - ç§»è¡Œé€²æ—è¡¨ç¤ºï¼ˆãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ + å®Œäº†ä»¶æ•°ï¼‰
   - ç§»è¡Œå®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆã€Œãƒ‡ãƒ¼ã‚¿ç§»è¡ŒãŒå®Œäº†ã—ã¾ã—ãŸï¼ã€ï¼‰

6. **ç§»è¡Œå®Œäº†å¾Œ**
   - Hiveãƒ‡ãƒ¼ã‚¿ã¯è‡ªå‹•å‰Šé™¤ï¼ˆç§»è¡Œå®Œäº†ç¢ºèªå¾Œï¼‰
   - ä»¥é™ã¯Firestoreã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆã‚ªãƒ³ãƒ©ã‚¤ãƒ³ï¼‰
   - é€šå¸¸ã®ãƒ›ãƒ¼ãƒ ç”»é¢ã¸é·ç§»
   - ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤ºï¼ˆæ–°æ©Ÿèƒ½ã®ç°¡å˜ãªèª¬æ˜ï¼‰

##### æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼
1. ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆï¼ˆEmail/Passwordï¼‰
2. ãƒãƒ¼ãƒ ä½œæˆ or æ‹›å¾…ã‚³ãƒ¼ãƒ‰å…¥åŠ›ï¼ˆå°†æ¥å®Ÿè£…ï¼‰
3. ãã®ã¾ã¾ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§åˆ©ç”¨é–‹å§‹

##### **ã€ä¸æ¡ç”¨ã€‘æ¡ˆB: åˆ¥ã‚¢ãƒ—ãƒªã¨ã—ã¦ãƒªãƒªãƒ¼ã‚¹**
- ç†ç”±ï¼šã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ•°ãŒå°‘ãªã„ãŸã‚ã€æ—¢å­˜ã‚¢ãƒ—ãƒªã‚’ç§»è¡Œã™ã‚‹æ–¹ãŒåŠ¹ç‡çš„

### 7.2 æŠ€è¡“çš„ãªç§»è¡Œå®Ÿè£…

```dart
// lib/services/migration_service.dart
class MigrationService {
  /// ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰Firestoreã¸ç§»è¡Œ
  static Future<void> migrateFromBackup(
    String backupFilePath,
    String teamId,
    String userId,
  ) async {
    // 1. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ï¼ˆæ—¢å­˜ã®BackupServiceä½¿ç”¨ï¼‰
    final file = File(backupFilePath);
    final jsonString = await file.readAsString();
    final backupData = json.decode(jsonString);
    final data = backupData['data'];

    final firestore = FirebaseFirestore.instance;
    final batch = firestore.batch();

    // 2. ã‚¹ã‚¿ãƒƒãƒ•ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ
    for (var staffJson in data['staff']) {
      final docRef = firestore
          .collection('teams')
          .doc(teamId)
          .collection('staff')
          .doc(staffJson['id']);
      batch.set(docRef, {
        ...staffJson,
        'userId': null, // åˆæœŸã¯æœªç´ä»˜ã‘
        'createdAt': FieldValue.serverTimestamp(),
        'updatedAt': FieldValue.serverTimestamp(),
      });
    }

    // 3. ã‚·ãƒ•ãƒˆãƒ‡ãƒ¼ã‚¿ç§»è¡Œ
    for (var shiftJson in data['shifts']) {
      final docRef = firestore
          .collection('teams')
          .doc(teamId)
          .collection('shifts')
          .doc(shiftJson['id']);
      batch.set(docRef, {
        ...shiftJson,
        'date': Timestamp.fromDate(DateTime.parse(shiftJson['date'])),
        'startTime': Timestamp.fromDate(DateTime.parse(shiftJson['startTime'])),
        'endTime': Timestamp.fromDate(DateTime.parse(shiftJson['endTime'])),
        'createdAt': FieldValue.serverTimestamp(),
        'updatedAt': FieldValue.serverTimestamp(),
      });
    }

    // 4. åˆ¶ç´„ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ
    for (var constraintJson in data['constraints']) {
      final docRef = firestore
          .collection('teams')
          .doc(teamId)
          .collection('constraints')
          .doc(constraintJson['id']);
      batch.set(docRef, {
        ...constraintJson,
        'date': Timestamp.fromDate(DateTime.parse(constraintJson['date'])),
        'createdAt': FieldValue.serverTimestamp(),
        'updatedAt': FieldValue.serverTimestamp(),
      });
    }

    // 5. ã‚·ãƒ•ãƒˆæ™‚é–“è¨­å®šç§»è¡Œ
    for (var settingJson in data['shift_time_settings']) {
      final docRef = firestore
          .collection('teams')
          .doc(teamId)
          .collection('shift_time_settings')
          .doc();
      batch.set(docRef, settingJson);
    }

    // 6. æœˆé–“ã‚·ãƒ•ãƒˆè¨­å®šç§»è¡Œ
    final requirements = data['shift_requirements'] as Map<String, dynamic>;
    for (var entry in requirements.entries) {
      final docRef = firestore
          .collection('teams')
          .doc(teamId)
          .collection('shift_requirements')
          .doc(entry.key);
      batch.set(docRef, {
        'shiftType': entry.key,
        'requiredCount': entry.value,
      });
    }

    // 7. ãƒãƒƒãƒå®Ÿè¡Œ
    await batch.commit();

    // 8. Hiveãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢
    await Hive.deleteBoxFromDisk('staff');
    await Hive.deleteBoxFromDisk('shifts');
    await Hive.deleteBoxFromDisk('constraints');
    await Hive.deleteBoxFromDisk('shift_time_settings');

    // 9. SharedPreferencesã‚¯ãƒªã‚¢
    final prefs = await SharedPreferences.getInstance();
    final keysToRemove = prefs.getKeys()
        .where((key) => key.startsWith('shift_requirement_'))
        .toList();
    for (var key in keysToRemove) {
      await prefs.remove(key);
    }
  }
}
```

### 7.3 ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã®å®Ÿè£…ï¼ˆæ¡ˆAï¼‰

#### 7.3.1 AuthGateã§ã®æ—¢å­˜ãƒ‡ãƒ¼ã‚¿æ¤œå‡º

```dart
// lib/widgets/auth_gate.dart
import 'package:hive_flutter/hive_flutter.dart';

class AuthGate extends StatelessWidget {
  const AuthGate({super.key});

  /// æ—¢å­˜ã®Hiveãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
  Future<bool> _hasExistingData() async {
    try {
      // Hiveãƒœãƒƒã‚¯ã‚¹ãŒå­˜åœ¨ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
      final staffBoxExists = await Hive.boxExists('staff');
      final shiftsBoxExists = await Hive.boxExists('shifts');

      if (!staffBoxExists || !shiftsBoxExists) {
        return false;
      }

      // ãƒœãƒƒã‚¯ã‚¹ã‚’é–‹ã„ã¦ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
      final staffBox = await Hive.openBox('staff');
      final shiftsBox = await Hive.openBox('shifts');

      final hasData = staffBox.isNotEmpty || shiftsBox.isNotEmpty;

      await staffBox.close();
      await shiftsBox.close();

      return hasData;
    } catch (e) {
      return false; // ã‚¨ãƒ©ãƒ¼æ™‚ã¯æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ãªã—ã¨ã—ã¦æ‰±ã†
    }
  }

  @override
  Widget build(BuildContext context) {
    return FutureBuilder<bool>(
      future: _hasExistingData(),
      builder: (context, dataSnapshot) {
        if (dataSnapshot.connectionState == ConnectionState.waiting) {
          return const Scaffold(
            body: Center(child: CircularProgressIndicator()),
          );
        }

        final hasExistingData = dataSnapshot.data ?? false;

        return StreamBuilder<User?>(
          stream: FirebaseAuth.instance.authStateChanges(),
          builder: (context, authSnapshot) {
            // æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã€æœªãƒ­ã‚°ã‚¤ãƒ³ã®å ´åˆ â†’ ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢
            if (hasExistingData && !authSnapshot.hasData) {
              return const MigrationOnboardingScreen();
            }

            // æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ãªã—ã€æœªãƒ­ã‚°ã‚¤ãƒ³ã®å ´åˆ â†’ ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
            if (!authSnapshot.hasData) {
              return const LoginScreen();
            }

            // ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ â†’ ãƒãƒ¼ãƒ æ‰€å±ãƒã‚§ãƒƒã‚¯
            return FutureBuilder(
              future: AuthService().getUser(authSnapshot.data!.uid),
              builder: (context, userSnapshot) {
                if (userSnapshot.connectionState == ConnectionState.waiting) {
                  return const Scaffold(
                    body: Center(child: CircularProgressIndicator()),
                  );
                }

                final appUser = userSnapshot.data;

                // ãƒãƒ¼ãƒ æœªæ‰€å± â†’ ãƒãƒ¼ãƒ ä½œæˆç”»é¢ï¼ˆãƒ‡ãƒ¼ã‚¿ç§»è¡Œãƒ•ãƒ©ã‚°ä»˜ãï¼‰
                if (appUser?.teamId == null) {
                  return TeamCreationScreen(
                    userId: authSnapshot.data!.uid,
                    shouldMigrateData: hasExistingData,
                  );
                }

                // ãƒãƒ¼ãƒ æ‰€å±æ¸ˆã¿ â†’ ãƒ›ãƒ¼ãƒ ç”»é¢
                return const HomeScreen();
              },
            );
          },
        );
      },
    );
  }
}
```

#### 7.3.2 ã‚ªãƒ³ãƒœãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã®å®Ÿè£…

```dart
// lib/screens/migration/migration_onboarding_screen.dart
class MigrationOnboardingScreen extends StatelessWidget {
  const MigrationOnboardingScreen({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: SafeArea(
        child: Padding(
          padding: const EdgeInsets.all(24),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: [
              // ã‚¢ã‚¤ã‚³ãƒ³
              Icon(
                Icons.rocket_launch,
                size: 100,
                color: Theme.of(context).colorScheme.primary,
              ),
              const SizedBox(height: 24),

              // ã‚¿ã‚¤ãƒˆãƒ«
              Text(
                'ã‚·ãƒ•ãƒˆå·¥æˆ¿ãŒ\nãƒ‘ãƒ¯ãƒ¼ã‚¢ãƒƒãƒ—ã—ã¾ã—ãŸï¼',
                style: Theme.of(context).textTheme.headlineMedium?.copyWith(
                      fontWeight: FontWeight.bold,
                    ),
                textAlign: TextAlign.center,
              ),
              const SizedBox(height: 16),

              // ãƒ¡ãƒªãƒƒãƒˆèª¬æ˜
              Card(
                color: Colors.blue.shade50,
                child: const Padding(
                  padding: EdgeInsets.all(16),
                  child: Column(
                    crossAxisAlignment: CrossAxisAlignment.start,
                    children: [
                      Text(
                        'ğŸ‰ æ–°æ©Ÿèƒ½',
                        style: TextStyle(
                          fontWeight: FontWeight.bold,
                          fontSize: 16,
                        ),
                      ),
                      SizedBox(height: 8),
                      Text('âœ… ãƒãƒ¼ãƒ ã§ã‚·ãƒ•ãƒˆã‚’å…±æœ‰'),
                      Text('âœ… ãƒ¡ãƒ³ãƒãƒ¼ãŒä¼‘ã¿å¸Œæœ›ã‚’å…¥åŠ›å¯èƒ½'),
                      Text('âœ… è¤‡æ•°ç«¯æœ«ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ'),
                      Text('âœ… ãƒ‡ãƒ¼ã‚¿è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—'),
                    ],
                  ),
                ),
              ),
              const SizedBox(height: 24),

              // ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã®æ¡ˆå†…
              Card(
                color: Colors.green.shade50,
                child: const Padding(
                  padding: EdgeInsets.all(16),
                  child: Column(
                    crossAxisAlignment: CrossAxisAlignment.start,
                    children: [
                      Row(
                        children: [
                          Icon(Icons.check_circle, color: Colors.green),
                          SizedBox(width: 8),
                          Text(
                            'ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã«ã¤ã„ã¦',
                            style: TextStyle(
                              fontWeight: FontWeight.bold,
                              fontSize: 16,
                            ),
                          ),
                        ],
                      ),
                      SizedBox(height: 8),
                      Text('æ—¢å­˜ã®ã‚¹ã‚¿ãƒƒãƒ•ãƒ»ã‚·ãƒ•ãƒˆãƒ‡ãƒ¼ã‚¿ã¯è‡ªå‹•ã§ç§»è¡Œã•ã‚Œã¾ã™'),
                      Text('ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆå¾Œã€ã™ãã«ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™'),
                    ],
                  ),
                ),
              ),
              const SizedBox(height: 32),

              // ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆãƒœã‚¿ãƒ³
              FilledButton.icon(
                onPressed: () {
                  Navigator.of(context).push(
                    MaterialPageRoute(
                      builder: (_) => const SignUpScreen(fromMigration: true),
                    ),
                  );
                },
                icon: const Icon(Icons.arrow_forward),
                label: const Text('ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆã—ã¦å§‹ã‚ã‚‹'),
              ),
              const SizedBox(height: 8),

              // å¾Œã§ãƒœã‚¿ãƒ³
              TextButton(
                onPressed: () {
                  Navigator.of(context).pop();
                },
                child: const Text('å¾Œã§'),
              ),
            ],
          ),
        ),
      ),
    );
  }
}
```

#### 7.3.3 ãƒãƒ¼ãƒ ä½œæˆå¾Œã®è‡ªå‹•ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ

```dart
// lib/screens/team/team_creation_screen.dartï¼ˆä¿®æ­£ç‰ˆï¼‰
class TeamCreationScreen extends StatefulWidget {
  final String userId;
  final bool shouldMigrateData; // ãƒ‡ãƒ¼ã‚¿ç§»è¡Œãƒ•ãƒ©ã‚°

  const TeamCreationScreen({
    super.key,
    required this.userId,
    this.shouldMigrateData = false,
  });

  // ... çœç•¥ ...

  Future<void> _handleCreateTeam() async {
    if (!_formKey.currentState!.validate()) return;

    setState(() => _isLoading = true);

    try {
      // ãƒãƒ¼ãƒ ä½œæˆ
      await _authService.createTeam(
        teamName: _teamNameController.text.trim(),
        ownerId: widget.userId,
      );

      if (!mounted) return;

      // ãƒ‡ãƒ¼ã‚¿ç§»è¡ŒãŒå¿…è¦ãªå ´åˆ
      if (widget.shouldMigrateData) {
        await _showMigrationDialog();
      } else {
        // é€šå¸¸ã®ãƒ›ãƒ¼ãƒ ç”»é¢é·ç§»
        _navigateToHome();
      }
    } catch (e) {
      // ã‚¨ãƒ©ãƒ¼å‡¦ç†
    }
  }

  Future<void> _showMigrationDialog() async {
    showDialog(
      context: context,
      barrierDismissible: false,
      builder: (context) => MigrationProgressDialog(
        teamId: _authService.currentTeamId!,
        userId: widget.userId,
        onComplete: () {
          Navigator.of(context).pop(); // ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’é–‰ã˜ã‚‹
          _navigateToHome();
        },
      ),
    );
  }

  void _navigateToHome() {
    final prefs = await SharedPreferences.getInstance();
    await prefs.setBool('has_seen_first_time_help', true);

    Navigator.of(context).pushAndRemoveUntil(
      MaterialPageRoute(
        builder: (_) => const HomeScreen(showWelcomeDialog: true),
      ),
      (route) => false,
    );
  }
}
```

### 7.4 å®‰å…¨ç­–
- âœ… è‡ªå‹•ç§»è¡Œã«ã‚ˆã‚Šãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã‚’æœ€å°åŒ–ï¼ˆã‚¨ãƒ©ãƒ¼ãƒªã‚¹ã‚¯ä½æ¸›ï¼‰
- âœ… å°‘äººæ•°ãƒ†ã‚¹ãƒˆãƒãƒ¼ãƒ ï¼ˆ5-10äººï¼‰ã§äº‹å‰ã«ç§»è¡Œãƒ†ã‚¹ãƒˆ
- âœ… ç§»è¡Œå¤±æ•—æ™‚ã¯æ—¢å­˜Hiveãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒï¼ˆå†è©¦è¡Œå¯èƒ½ï¼‰
- âœ… ã‚¢ãƒ—ãƒªã‚¹ãƒˆã‚¢ã®æ›´æ–°æƒ…å ±ã§äº‹å‰å‘ŠçŸ¥

## 8. ãƒãƒ¼ãƒ æ‹›å¾…æ©Ÿèƒ½ã®è©³ç´°è¨­è¨ˆï¼ˆãƒªãƒªãƒ¼ã‚¹å¿…é ˆï¼‰

### 8.1 æ‹›å¾…ã‚³ãƒ¼ãƒ‰æ–¹å¼ï¼ˆã‚·ãƒ³ãƒ—ãƒ«å®Ÿè£…ï¼‰

#### ç®¡ç†è€…å´ï¼šæ‹›å¾…ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ»è¡¨ç¤º

```dart
// è¨­å®šç”»é¢ã«ã€Œãƒãƒ¼ãƒ æ‹›å¾…ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¿½åŠ 
class TeamInviteScreen extends StatelessWidget {
  final String teamId;

  @override
  Widget build(BuildContext context) {
    // teamIdã®æœ€åˆ6æ–‡å­—ã‚’å¤§æ–‡å­—ã«å¤‰æ›ã—ã¦æ‹›å¾…ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦è¡¨ç¤º
    final inviteCode = teamId.substring(0, 6).toUpperCase();

    return Scaffold(
      appBar: AppBar(title: Text('ãƒãƒ¼ãƒ æ‹›å¾…')),
      body: Center(
        child: Column(
          children: [
            Text('æ‹›å¾…ã‚³ãƒ¼ãƒ‰', style: TextStyle(fontSize: 18)),
            Text(inviteCode, style: TextStyle(fontSize: 48, fontWeight: FontWeight.bold)),
            Text('ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’ãƒ¡ãƒ³ãƒãƒ¼ã«å…±æœ‰ã—ã¦ãã ã•ã„'),
            // ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã€QRã‚³ãƒ¼ãƒ‰è¡¨ç¤ºï¼ˆå°†æ¥çš„ï¼‰
          ],
        ),
      ),
    );
  }
}
```

#### ãƒ¡ãƒ³ãƒãƒ¼å´ï¼šæ‹›å¾…ã‚³ãƒ¼ãƒ‰å…¥åŠ›

```dart
// ãƒ­ã‚°ã‚¤ãƒ³å¾Œã€teamIdãŒnullã®å ´åˆã«è¡¨ç¤º
class JoinTeamScreen extends StatefulWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('ãƒãƒ¼ãƒ ã«å‚åŠ ')),
      body: Padding(
        padding: EdgeInsets.all(24),
        child: Column(
          children: [
            Text('ç®¡ç†è€…ã‹ã‚‰å—ã‘å–ã£ãŸæ‹›å¾…ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),
            TextField(
              decoration: InputDecoration(labelText: 'æ‹›å¾…ã‚³ãƒ¼ãƒ‰ï¼ˆ6æ¡ï¼‰'),
              maxLength: 6,
              textCapitalization: TextCapitalization.characters,
            ),
            ElevatedButton(
              onPressed: _handleJoinTeam,
              child: Text('ãƒãƒ¼ãƒ ã«å‚åŠ '),
            ),
          ],
        ),
      ),
    );
  }
}
```

#### ãƒãƒ¼ãƒ å‚åŠ å‡¦ç†

```dart
class TeamService {
  Future<void> joinTeamByCode(String inviteCode, String userId) async {
    // 1. æ‹›å¾…ã‚³ãƒ¼ãƒ‰ã‹ã‚‰teamIdã‚’æ¤œç´¢
    final teamsQuery = await FirebaseFirestore.instance
        .collection('teams')
        .where(FieldPath.documentId, isGreaterThanOrEqualTo: inviteCode.toLowerCase())
        .where(FieldPath.documentId, isLessThan: inviteCode.toLowerCase() + '\uf8ff')
        .limit(1)
        .get();

    if (teamsQuery.docs.isEmpty) {
      throw 'æ‹›å¾…ã‚³ãƒ¼ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“';
    }

    final teamId = teamsQuery.docs.first.id;

    // 2. usersã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®teamIdã‚’æ›´æ–°
    await FirebaseFirestore.instance
        .collection('users')
        .doc(userId)
        .update({
      'teamId': teamId,
      'role': 'member', // ãƒ¡ãƒ³ãƒãƒ¼ã¨ã—ã¦å‚åŠ 
      'updatedAt': FieldValue.serverTimestamp(),
    });

    // 3. teamsã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®memberIdsã«è¿½åŠ 
    await FirebaseFirestore.instance
        .collection('teams')
        .doc(teamId)
        .update({
      'memberIds': FieldValue.arrayUnion([userId]),
      'updatedAt': FieldValue.serverTimestamp(),
    });
  }
}
```

### 8.2 ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼

#### ç®¡ç†è€…ï¼ˆãƒãƒ¼ãƒ ä½œæˆæ¸ˆã¿ï¼‰
1. è¨­å®šç”»é¢ â†’ ã€Œãƒãƒ¼ãƒ æ‹›å¾…ã€
2. æ‹›å¾…ã‚³ãƒ¼ãƒ‰è¡¨ç¤ºï¼ˆä¾‹: `ABC123`ï¼‰
3. ã‚³ãƒ¼ãƒ‰ã‚’ãƒ¡ãƒ³ãƒãƒ¼ã«å…±æœ‰ï¼ˆLINEãªã©ï¼‰

#### ãƒ¡ãƒ³ãƒãƒ¼ï¼ˆæ–°è¦ç™»éŒ²ï¼‰
1. ã‚¢ãƒ—ãƒªèµ·å‹• â†’ ã‚¦ã‚§ãƒ«ã‚«ãƒ ç”»é¢ â†’ ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—
2. ãƒ­ã‚°ã‚¤ãƒ³å¾Œã€ã€Œãƒãƒ¼ãƒ ã«å‚åŠ ã€ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹
3. æ‹›å¾…ã‚³ãƒ¼ãƒ‰å…¥åŠ› â†’ ã€Œãƒãƒ¼ãƒ ã«å‚åŠ ã€ãƒœã‚¿ãƒ³
4. ãƒãƒ¼ãƒ å‚åŠ å®Œäº† â†’ ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”»é¢ï¼ˆé–²è¦§ãƒ¢ãƒ¼ãƒ‰ï¼‰

### 8.3 å®Ÿè£…ã‚¹ã‚³ãƒ¼ãƒ—

**ãƒªãƒªãƒ¼ã‚¹æ™‚ã«å®Ÿè£…**:
- âœ… æ‹›å¾…ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ»è¡¨ç¤º
- âœ… æ‹›å¾…ã‚³ãƒ¼ãƒ‰å…¥åŠ›ç”»é¢
- âœ… ãƒãƒ¼ãƒ å‚åŠ å‡¦ç†ï¼ˆFirestoreæ›´æ–°ï¼‰
- âœ… ãƒãƒ¼ãƒ å‚åŠ å¾Œã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

**ãƒªãƒªãƒ¼ã‚¹å¾Œã«è¿½åŠ **:
- QRã‚³ãƒ¼ãƒ‰è¡¨ç¤ºãƒ»èª­ã¿å–ã‚Š
- ãƒ¡ãƒ¼ãƒ«æ‹›å¾…ãƒªãƒ³ã‚¯
- æ‹›å¾…å±¥æ­´ç®¡ç†

## 9. æŠ€è¡“çš„ãªå®Ÿè£…ãƒã‚¤ãƒ³ãƒˆ

### 9.1 å¿…è¦ãªè¿½åŠ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

```yaml
dependencies:
  # æ—¢å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ç¶­æŒ
  firebase_core: ^3.3.0
  firebase_auth: ^5.1.4
  cloud_firestore: ^5.2.1
  firebase_messaging: ^15.0.4  # Pushé€šçŸ¥ç”¨

  # Hiveé–¢é€£ã¯å‰Šé™¤
  # hive: å‰Šé™¤
  # hive_flutter: å‰Šé™¤
```

### 8.2 ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œï¼ˆFirestoreã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ï¼‰

**æ±ºå®šäº‹é …**: Hiveå®Œå…¨å‰Šé™¤ã€Firestoreã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ã®ã¿ã§ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ

```dart
// lib/main.dartåˆæœŸåŒ–æ™‚
void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await Firebase.initializeApp();

  // Firestoreã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®šï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œï¼‰
  FirebaseFirestore.instance.settings = const Settings(
    persistenceEnabled: true,  // ã“ã‚Œã ã‘ã§ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ
    cacheSizeBytes: Settings.CACHE_SIZE_UNLIMITED,
  );

  runApp(MyApp());
}
```

**ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ©Ÿèƒ½ã®å‹•ä½œ**:
- âœ… ä¸€åº¦è¦‹ãŸãƒ‡ãƒ¼ã‚¿ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜
- âœ… ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ã‚‚é–²è¦§ãƒ»ç·¨é›†å¯èƒ½
- âœ… ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å¾©å¸°æ™‚ã«è‡ªå‹•åŒæœŸ
- âœ… è¿½åŠ å®Ÿè£…ã»ã¼ã‚¼ãƒ­
- âš ï¸ ç·¨é›†ã®ç«¶åˆã¯ç™ºç”Ÿã—ã†ã‚‹ï¼ˆå¾Œã‹ã‚‰ä¸Šæ›¸ããŒå‹ã¤ï¼‰

### 8.3 ç”»é¢ãƒ»æ©Ÿèƒ½ã®å¤‰æ›´ç‚¹

#### æ–°è¦ç”»é¢
1. **ãƒ­ã‚°ã‚¤ãƒ³/ã‚µã‚¤ãƒ³ã‚¢ãƒƒãƒ—ç”»é¢** (`lib/screens/auth/`)
   - Email/Passwordèªè¨¼
   - ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½

2. **ãƒãƒ¼ãƒ é¸æŠ/ä½œæˆç”»é¢** (`lib/screens/team/`)
   - ãƒãƒ¼ãƒ æ–°è¦ä½œæˆ
   - æ‹›å¾…ã‚³ãƒ¼ãƒ‰å…¥åŠ›ï¼ˆå°†æ¥çš„ã«ï¼‰

3. **ãƒ‡ãƒ¼ã‚¿ç§»è¡Œç”»é¢** (`lib/screens/migration/`)
   - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ
   - ç§»è¡Œé€²æ—è¡¨ç¤º
   - ç§»è¡Œå®Œäº†ç¢ºèª

4. **ãƒã‚¤ã‚·ãƒ•ãƒˆç”»é¢** (`lib/screens/my_shift/`)
   - ãƒ¡ãƒ³ãƒãƒ¼ç”¨: è‡ªåˆ†ã®ã‚·ãƒ•ãƒˆã®ã¿è¡¨ç¤º
   - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å½¢å¼
   - æ¬¡ã®ã‚·ãƒ•ãƒˆç¢ºèª

5. **ä¼‘ã¿å¸Œæœ›å…¥åŠ›ç”»é¢** (`lib/screens/holiday_request/`)
   - ãƒ¡ãƒ³ãƒãƒ¼ç”¨: ä¼‘ã¿å¸Œæœ›æ—¥é¸æŠ
   - ç· ã‚æ—¥è¡¨ç¤º
   - ç· ã‚æ—¥å¾Œã¯å…¥åŠ›ä¸å¯

6. **ãƒ¡ãƒ³ãƒãƒ¼ç®¡ç†ç”»é¢** (`lib/screens/member_management/`)
   - ç®¡ç†è€…ç”¨: ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ä¸€è¦§
   - æ‹›å¾…ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
   - æ¨©é™å¤‰æ›´

#### æ—¢å­˜ç”»é¢ã®æ”¹ä¿®
1. **ãƒ›ãƒ¼ãƒ ç”»é¢** (`lib/screens/home_screen.dart`)
   - ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒœã‚¿ãƒ³è¿½åŠ 
   - æ¨©é™è¡¨ç¤ºï¼ˆç®¡ç†è€…/ãƒ¡ãƒ³ãƒãƒ¼ï¼‰
   - ãƒ¡ãƒ³ãƒãƒ¼ç”¨ã®ç°¡æ˜“ç‰ˆãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

2. **ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”»é¢** (`lib/screens/calendar_screen.dart`)
   - ç®¡ç†è€…: å…¨æ©Ÿèƒ½ç¶­æŒï¼ˆç·¨é›†ãƒ»å‰Šé™¤å¯èƒ½ï¼‰
   - ãƒ¡ãƒ³ãƒãƒ¼: é–²è¦§ã®ã¿ + è‡ªåˆ†ã®ã‚·ãƒ•ãƒˆã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
   - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ï¼ˆStreamBuilderä½¿ç”¨ï¼‰

3. **ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç†ç”»é¢** (`lib/screens/staff_list_screen.dart`)
   - ç®¡ç†è€…: å…¨æ©Ÿèƒ½ç¶­æŒ + ãƒ¦ãƒ¼ã‚¶ãƒ¼ç´ä»˜ã‘æ©Ÿèƒ½
   - ãƒ¡ãƒ³ãƒãƒ¼: éè¡¨ç¤º

4. **è¨­å®šç”»é¢** (`lib/screens/settings_screen.dart`)
   - ç®¡ç†è€…: ç· ã‚æ—¥è¨­å®šè¿½åŠ 
   - ãƒ¡ãƒ³ãƒãƒ¼: åˆ¶é™ç‰ˆï¼ˆå€‹äººæƒ…å ±ã®ã¿ç·¨é›†å¯ï¼‰

5. **ã‚·ãƒ•ãƒˆè¡¨ç”»é¢** (`lib/screens/export_screen.dart`)
   - ä¸¡æ¨©é™: Excel/PNGå‡ºåŠ›ç¶­æŒ
   - ãƒ¡ãƒ³ãƒãƒ¼: è‡ªåˆ†ã®ã‚·ãƒ•ãƒˆã®ã¿å‡ºåŠ›ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¿½åŠ 

### 8.4 Providerã®æ”¹ä¿®

æ—¢å­˜ã®Provideræ§‹é€ ã¯ç¶­æŒã—ã€ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’Firestoreã«å¤‰æ›´

```dart
// Before: Hiveãƒ™ãƒ¼ã‚¹
class StaffProvider extends ChangeNotifier {
  final Box<Staff> _staffBox = Hive.box<Staff>('staff');
  List<Staff> get staffList => _staffBox.values.toList();
}

// After: Firestoreãƒ™ãƒ¼ã‚¹
class StaffProvider extends ChangeNotifier {
  final FirebaseFirestore _firestore = FirebaseFirestore.instance;
  String? _teamId;
  List<Staff> _staffList = [];

  List<Staff> get staffList => _staffList;

  Stream<List<Staff>> watchStaff(String teamId) {
    return _firestore
        .collection('teams')
        .doc(teamId)
        .collection('staff')
        .snapshots()
        .map((snapshot) =>
            snapshot.docs.map((doc) => Staff.fromJson(doc.data())).toList());
  }
}
```

### 8.5 è‡ªå‹•ã‚·ãƒ•ãƒˆç”Ÿæˆã®å®Ÿè£…

**æ±ºå®šäº‹é …**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè¡Œï¼ˆæ—¢å­˜ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ãã®ã¾ã¾ä½¿ç”¨ï¼‰

```dart
// lib/services/shift_assignment_service.dart
// æ—¢å­˜ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ç¶­æŒ
// å¤‰æ›´ç‚¹: Firestoreã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—ã€ç”Ÿæˆçµæœã‚’Firestoreã«ä¿å­˜

class ShiftAssignmentService {
  static Future<void> assignShifts(String teamId, /* ... */) async {
    // 1. Firestoreã‹ã‚‰ã‚¹ã‚¿ãƒƒãƒ•ãƒ»åˆ¶ç´„ãƒ‡ãƒ¼ã‚¿å–å¾—
    final staff = await _fetchStaff(teamId);
    final constraints = await _fetchConstraints(teamId);

    // 2. æ—¢å­˜ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ç”Ÿæˆï¼ˆå¤‰æ›´ãªã—ï¼‰
    final generatedShifts = _generateShifts(staff, constraints, /* ... */);

    // 3. Firestoreã«ãƒãƒƒãƒæ›¸ãè¾¼ã¿
    final batch = FirebaseFirestore.instance.batch();
    for (var shift in generatedShifts) {
      final docRef = FirebaseFirestore.instance
          .collection('teams')
          .doc(teamId)
          .collection('shifts')
          .doc();
      batch.set(docRef, shift.toJson());
    }
    await batch.commit();
  }
}
```

### 8.6 AdMobåºƒå‘Šã®è¡¨ç¤ºåˆ¶å¾¡ï¼ˆAndroidç‰ˆã‚¢ãƒ—ãƒªï¼‰

**æ±ºå®šäº‹é …**: ç®¡ç†è€…ãƒ»ãƒ¡ãƒ³ãƒãƒ¼ä¸¡æ–¹ã«ãƒãƒŠãƒ¼åºƒå‘Šè¡¨ç¤ºï¼ˆãƒ¡ã‚¤ãƒ³åç›Šæºï¼‰

```dart
// å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒãƒŠãƒ¼åºƒå‘Šè¡¨ç¤º
Widget buildBannerAd() {
  if (kIsWeb) {
    return SizedBox.shrink(); // Webç‰ˆã§ã¯AdMobã¯ä½¿ãˆãªã„
  }
  return BannerAdWidget(); // Android/iOSç‰ˆã®ã¿
}
```

**åºƒå‘Šé…ç½®**:
- **å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å…±é€š**:
  - ãƒ›ãƒ¼ãƒ ç”»é¢ä¸‹éƒ¨ï¼ˆãƒãƒŠãƒ¼åºƒå‘Šï¼‰
  - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”»é¢ä¸‹éƒ¨ï¼ˆãƒãƒŠãƒ¼åºƒå‘Šï¼‰

- **ãƒ¡ãƒ³ãƒãƒ¼å°‚ç”¨**:
  - ãƒã‚¤ã‚·ãƒ•ãƒˆç”»é¢ä¸‹éƒ¨ï¼ˆãƒãƒŠãƒ¼åºƒå‘Šï¼‰

- **ç®¡ç†è€…å°‚ç”¨**:
  - ã‚¤ãƒ³ã‚¿ãƒ¼ã‚¹ãƒ†ã‚£ã‚·ãƒ£ãƒ«åºƒå‘Šï¼ˆã‚·ãƒ•ãƒˆè‡ªå‹•ç”Ÿæˆå®Œäº†æ™‚ï¼‰
  - ã‚¤ãƒ³ã‚¿ãƒ¼ã‚¹ãƒ†ã‚£ã‚·ãƒ£ãƒ«åºƒå‘Šï¼ˆæœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆç¢ºèªæ™‚ï¼‰

**Webç‰ˆã®åºƒå‘Š**:
- AdSenseã‚’ä½¿ç”¨ï¼ˆAdMobã¯ä½¿ãˆãªã„ï¼‰
- åç›Šæ€§ãŒä½ã„ãŸã‚ã€æœ€å°é™ã®é…ç½®
- iOSãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘æ•‘æ¸ˆæªç½®ã®ãŸã‚ã€åºƒå‘Šä½“é¨“ã‚ˆã‚ŠUXå„ªå…ˆ

## 10. ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æˆ¦ç•¥ï¼ˆAndroid/Web/iOSï¼‰

### 9.1 åŸºæœ¬æ–¹é‡

**æ±ºå®šäº‹é …**: æ®µéšçš„ãªå¤šæ®µéšãƒªãƒªãƒ¼ã‚¹

```
ãƒ•ã‚§ãƒ¼ã‚º1: Androidç‰ˆï¼ˆç®¡ç†è€…å‘ã‘ï¼‰
  â†“
ãƒ•ã‚§ãƒ¼ã‚º2: Webç‰ˆï¼ˆãƒ¡ãƒ³ãƒãƒ¼å‘ã‘ï¼‰
  â†“
ãƒ•ã‚§ãƒ¼ã‚º3: iOSç‰ˆï¼ˆå°†æ¥ãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ•°æ¬¡ç¬¬ï¼‰
```

### 9.2 å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®å½¹å‰²

| ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  | å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ | ä¸»è¦æ©Ÿèƒ½ | åç›ŠåŒ– | ãƒªãƒªãƒ¼ã‚¹æ™‚æœŸ |
|-----------------|-------------|---------|--------|-------------|
| **Androidç‰ˆã‚¢ãƒ—ãƒª** | **ç®¡ç†è€…+ãƒ¡ãƒ³ãƒãƒ¼å…¨å“¡** | å…¨æ©Ÿèƒ½ï¼ˆæ¨©é™ã§å‡ºã—åˆ†ã‘ï¼‰<br>ãƒ»ç®¡ç†è€…: ã‚·ãƒ•ãƒˆä½œæˆãƒ»ç·¨é›†ãƒ»è‡ªå‹•ç”Ÿæˆ<br>ãƒ»ãƒ¡ãƒ³ãƒãƒ¼: é–²è¦§ãƒ»ä¼‘ã¿å¸Œæœ›å…¥åŠ› | AdMobï¼ˆãƒãƒŠãƒ¼+ã‚¤ãƒ³ã‚¿ãƒ¼ã‚¹ãƒ†ã‚£ã‚·ãƒ£ãƒ«ï¼‰ | ãƒ•ã‚§ãƒ¼ã‚º1ï¼ˆ7é€±é–“ï¼‰ |
| **Webç‰ˆï¼ˆPWAï¼‰** | **iOSãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘æ•‘æ¸ˆæªç½®** | åŸºæœ¬æ©Ÿèƒ½ã®ã¿<br>ãƒ»ã‚·ãƒ•ãƒˆé–²è¦§ãƒ»ãƒã‚¤ã‚·ãƒ•ãƒˆãƒ»ä¼‘ã¿å¸Œæœ›å…¥åŠ›<br>ãƒ»åˆ¶é™: Pushé€šçŸ¥ä¸å®‰å®šã€ã‚ªãƒ•ãƒ©ã‚¤ãƒ³é™å®šçš„ | AdSenseï¼ˆä½åç›Šãƒ»èµ¤å­—è¦šæ‚Ÿï¼‰ | ãƒ•ã‚§ãƒ¼ã‚º2ï¼ˆ+2é€±é–“ï¼‰ |
| **iOSç‰ˆã‚¢ãƒ—ãƒª** | ç®¡ç†è€…+ãƒ¡ãƒ³ãƒãƒ¼ | å…¨æ©Ÿèƒ½ï¼ˆAndroidç‰ˆã¨åŒç­‰ï¼‰ | AdMob | ãƒ•ã‚§ãƒ¼ã‚º3ï¼ˆæ¡ç®—ãƒ©ã‚¤ãƒ³åˆ°é”å¾Œï¼‰<br>â†’ Webç‰ˆã‚¯ãƒ­ãƒ¼ã‚º |

### 9.3 Webç‰ˆã®ä½ç½®ã¥ã‘ã¨å®Ÿç¾å¯èƒ½æ€§

#### åŸºæœ¬æ–¹é‡

**Webç‰ˆã¯ã‚ãã¾ã§iOSãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã®æš«å®šçš„ãªæ•‘æ¸ˆæªç½®**

```
ãƒ¦ãƒ¼ã‚¶ãƒ¼å°ç·šï¼ˆæ¨å¥¨ï¼‰:
â”œâ”€ Androidãƒ¦ãƒ¼ã‚¶ãƒ¼ â†’ Androidç‰ˆã‚¢ãƒ—ãƒªï¼ˆãƒ•ãƒ«æ©Ÿèƒ½+AdMobï¼‰
â””â”€ iOSãƒ¦ãƒ¼ã‚¶ãƒ¼     â†’ Webç‰ˆï¼ˆåŸºæœ¬æ©Ÿèƒ½ã®ã¿+AdSenseï¼‰

iOSç‰ˆãƒªãƒªãƒ¼ã‚¹å¾Œ:
â””â”€ Webç‰ˆã‚¯ãƒ­ãƒ¼ã‚ºï¼ˆã¾ãŸã¯æœ€å°é™ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰ï¼‰
```

#### ã‚³ã‚¹ãƒˆï¼ˆç„¡æ–™æ ã§ååˆ†ï¼‰

```
Firebase Hosting ç„¡æ–™æ 
â”œâ”€ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: 10GB
â”œâ”€ è»¢é€é‡: 360MB/æ—¥ï¼ˆç´„12,000ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼/æ—¥ç›¸å½“ï¼‰
â””â”€ ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³å¯¾å¿œ

Firestore ç„¡æ–™æ ï¼ˆAndroidç‰ˆã¨å…±ç”¨ï¼‰
â”œâ”€ èª­ã¿å–ã‚Š: 5ä¸‡/æ—¥
â”œâ”€ æ›¸ãè¾¼ã¿: 2ä¸‡/æ—¥
â””â”€ iOSãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å°‘æ•°æƒ³å®šãªã®ã§ä½™è£•

åˆè¨ˆã‚³ã‚¹ãƒˆ: 0å††ï¼ˆå°è¦æ¨¡æƒ³å®šï¼‰
```

#### ãƒ¡ãƒªãƒƒãƒˆ

1. **iOS Developer Programä¸è¦**
   - $99/å¹´ã®ã‚³ã‚¹ãƒˆå‰Šæ¸›
   - å…ƒãŒå–ã‚Œã‚‹ã‹ä¸æ˜ãªæ®µéšã§åˆæœŸæŠ•è³‡ä¸è¦

2. **ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ**
   - iPhoneãƒ»iPadãƒ»Androidãƒ»PCã™ã¹ã¦å¯¾å¿œ
   - ãƒ–ãƒ©ã‚¦ã‚¶ãŒã‚ã‚Œã°å‹•ã

3. **é…å¸ƒãŒç°¡å˜**
   - URLã‚’å…±æœ‰ã™ã‚‹ã ã‘ï¼ˆä¾‹: `https://shift-kobo.web.app`ï¼‰
   - ã‚¢ãƒ—ãƒªã‚¹ãƒˆã‚¢å¯©æŸ»ä¸è¦
   - å³åº§ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆåæ˜ 

4. **PWAå¯¾å¿œã§ã‚¢ãƒ—ãƒªãƒ©ã‚¤ã‚¯**
   - ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€ã§ã‚¢ãƒ—ãƒªé¢¨ã«ä½¿ãˆã‚‹
   - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã‚­ãƒ£ãƒƒã‚·ãƒ¥å¯¾å¿œ
   - ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥å¯¾å¿œï¼ˆå°†æ¥çš„ã«ï¼‰

#### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆãƒ»æŠ€è¡“çš„åˆ¶é™ï¼ˆé‡è¦ï¼‰

1. **åºƒå‘Šåç›ŠãŒæ¥µã‚ã¦ä½ã„**
   - âŒ **AdMobã¯ä½¿ãˆãªã„**ï¼ˆãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªå°‚ç”¨ï¼‰
   - âœ… **Google AdSenseã®ã¿**ï¼ˆWebå°‚ç”¨ï¼‰
   - åç›Šæ€§: AdSense << AdMobï¼ˆç´„1/3ã€œ1/5ï¼‰
   - å¯¾ç­–: èµ¤å­—è¦šæ‚Ÿã®æ•‘æ¸ˆæªç½®ã¨å‰²ã‚Šåˆ‡ã‚‹

2. **Pushé€šçŸ¥ãŒä¸å®‰å®š**
   - Androidç‰ˆ: Firebase Cloud Messagingï¼ˆâ­â­â­â­â­ ç¢ºå®Ÿï¼‰
   - Webç‰ˆ: Push API + Service Workerï¼ˆâ­â­ ä¸å®‰å®šï¼‰
     - ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‰ã˜ã¦ã‚‹ã¨å±Šã‹ãªã„
     - iOSã®Safariã¯å¯¾å¿œãŒä¸å®Œå…¨ï¼ˆiOS 16.4+ã§ã‚‚åˆ¶é™å¤šã„ï¼‰
   - å¯¾ç­–: Pushé€šçŸ¥æ©Ÿèƒ½ã¯å®Ÿè£…ã—ãªã„ï¼ˆAndroidç‰ˆã§æä¾›ï¼‰

3. **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œãŒé™å®šçš„**
   - Androidç‰ˆ: Firestoreã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§å®Œå…¨å¯¾å¿œ
   - Webç‰ˆ: Service Workeræ¬¡ç¬¬ã§ä¸å®‰å®š
   - å¯¾ç­–: ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ©Ÿèƒ½ã¯æœŸå¾…ã—ãªã„ï¼ˆåŸºæœ¬ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å‰æï¼‰

4. **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³å¿…è¦**
   - å¯¾ç­–: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”»é¢ã‚’PC/ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ/ã‚¹ãƒãƒ›å¯¾å¿œ
   - ä½œæ¥­é‡: ä¸­ç¨‹åº¦ï¼ˆæ—¢å­˜ã‚³ãƒ¼ãƒ‰æµç”¨å¯èƒ½ï¼‰

### 9.4 æŠ€è¡“çš„ãªå®Ÿè£…ï¼ˆWebç‰ˆï¼‰

#### Firebase Hostingãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

```bash
# 1. Firebase CLIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g firebase-tools

# 2. Firebaseãƒ­ã‚°ã‚¤ãƒ³
firebase login

# 3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
firebase init hosting
# è³ªå•ã«ç­”ãˆã‚‹:
# - Public directory: build/web
# - Single-page app: Yes
# - Automatic builds: No

# 4. Webç‰ˆãƒ“ãƒ«ãƒ‰
flutter build web --release

# 5. ãƒ‡ãƒ—ãƒ­ã‚¤
firebase deploy --only hosting

# å®Œäº†ï¼ https://shift-kobo.web.app ã§å…¬é–‹
```

#### ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¤å®šã§æ©Ÿèƒ½å‡ºã—åˆ†ã‘

```dart
import 'package:flutter/foundation.dart' show kIsWeb;
import 'dart:io' show Platform;

// Webç‰ˆã§Androidãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¤œå‡ºã—ã¦ã‚¢ãƒ—ãƒªDLã‚’ä¿ƒã™
Widget buildPlatformNotice() {
  if (kIsWeb) {
    // User-Agentã‚’è¦‹ã¦Androidãƒ¦ãƒ¼ã‚¶ãƒ¼ãªã‚‰ã‚¢ãƒ—ãƒªDLãƒãƒŠãƒ¼è¡¨ç¤º
    return Card(
      color: Colors.orange.shade100,
      child: Padding(
        padding: EdgeInsets.all(16),
        child: Column(
          children: [
            Icon(Icons.android, size: 48),
            SizedBox(height: 8),
            Text('Androidã‚’ã”åˆ©ç”¨ã®æ–¹ã¸',
                style: TextStyle(fontWeight: FontWeight.bold)),
            Text('ã‚¢ãƒ—ãƒªç‰ˆãªã‚‰åºƒå‘ŠãŒå°‘ãªãã€ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ã‚‚ä½¿ãˆã¾ã™ï¼'),
            ElevatedButton(
              onPressed: () => launchUrl('Google Playãƒªãƒ³ã‚¯'),
              child: Text('ã‚¢ãƒ—ãƒªã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰'),
            ),
          ],
        ),
      ),
    );
  }
  return SizedBox.shrink();
}

// ç®¡ç†è€…å°‚ç”¨æ©Ÿèƒ½ï¼ˆã‚¢ãƒ—ãƒªç‰ˆã®ã¿è¡¨ç¤ºï¼‰
Widget buildAdminFeatures(String userRole) {
  if (kIsWeb) {
    // Webç‰ˆã§ã¯ç®¡ç†è€…ã§ã‚‚ä¸€éƒ¨æ©Ÿèƒ½åˆ¶é™
    return Card(
      child: Padding(
        padding: EdgeInsets.all(16),
        child: Text('ç®¡ç†è€…æ©Ÿèƒ½ã¯ã‚¢ãƒ—ãƒªç‰ˆã§ã”åˆ©ç”¨ãã ã•ã„'),
      ),
    );
  }

  if (userRole != 'admin') {
    return SizedBox.shrink();
  }

  // Android/iOSç‰ˆã®ã¿è¡¨ç¤º
  return Column(
    children: [
      // è‡ªå‹•ã‚·ãƒ•ãƒˆç”Ÿæˆãƒœã‚¿ãƒ³
      ElevatedButton.icon(
        icon: Icon(Icons.auto_awesome),
        label: Text('è‡ªå‹•ã‚·ãƒ•ãƒˆç”Ÿæˆ'),
        onPressed: _showAutoAssignmentDialog,
      ),
      // ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç†
      ListTile(
        leading: Icon(Icons.people),
        title: Text('ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç†'),
        onTap: () => Navigator.pushNamed(context, '/staff'),
      ),
      // ç· ã‚æ—¥è¨­å®š
      ListTile(
        leading: Icon(Icons.event_busy),
        title: Text('ç· ã‚æ—¥è¨­å®š'),
        onTap: () => Navigator.pushNamed(context, '/deadline'),
      ),
    ],
  );
}

// ãƒ¡ãƒ³ãƒãƒ¼ç”¨æ©Ÿèƒ½ï¼ˆå…¨ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œï¼‰
Widget buildMemberFeatures(String userRole) {
  return Column(
    children: [
      // ã‚·ãƒ•ãƒˆé–²è¦§ï¼ˆå…¨ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œï¼‰
      CalendarView(),
      // ãƒã‚¤ã‚·ãƒ•ãƒˆ
      MyShiftView(),
      // ä¼‘ã¿å¸Œæœ›å…¥åŠ›
      HolidayRequestButton(),
    ],
  );
}
```

#### PWAè¨­å®š

```json
// web/manifest.json
{
  "name": "ã‚·ãƒ•ãƒˆå·¥æˆ¿ - ãƒ¡ãƒ³ãƒãƒ¼ç”¨",
  "short_name": "ã‚·ãƒ•ãƒˆå·¥æˆ¿",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#FFFFFF",
  "theme_color": "#2196F3",
  "orientation": "portrait-primary",
  "icons": [
    {
      "src": "icons/Icon-192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "icons/Icon-512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}
```

```dart
// web/index.htmlï¼ˆService Workerç™»éŒ²ï¼‰
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('flutter-first-frame', function () {
      navigator.serviceWorker.register('flutter_service_worker.js');
    });
  }
</script>
```

### 9.5 æ®µéšçš„ãƒªãƒªãƒ¼ã‚¹è¨ˆç”»

#### ãƒ•ã‚§ãƒ¼ã‚º1: Androidç‰ˆã‚¢ãƒ—ãƒªï¼ˆç®¡ç†è€…+ãƒ¡ãƒ³ãƒãƒ¼å…¨å“¡ï¼‰- 7é€±é–“

**ç›®çš„**: æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³åŒ– + å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ã‚¢ãƒ—ãƒªæä¾›

- âœ… Firebase Auth + Firestore
- âœ… ãƒ‡ãƒ¼ã‚¿ç§»è¡Œãƒ„ãƒ¼ãƒ«
- âœ… ç®¡ç†è€…æ©Ÿèƒ½ï¼ˆã‚·ãƒ•ãƒˆCRUDãƒ»è‡ªå‹•ç”Ÿæˆãƒ»ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç†ï¼‰
- âœ… ãƒ¡ãƒ³ãƒãƒ¼æ©Ÿèƒ½ï¼ˆã‚·ãƒ•ãƒˆé–²è¦§ãƒ»ãƒã‚¤ã‚·ãƒ•ãƒˆãƒ»ä¼‘ã¿å¸Œæœ›å…¥åŠ›ï¼‰
- âœ… æ¨©é™åˆ¥UIåˆ¶å¾¡ï¼ˆãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ãƒ­ãƒ¼ãƒ«ã§ç”»é¢å‡ºã—åˆ†ã‘ï¼‰
- âœ… AdMobåºƒå‘Šï¼ˆå…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒãƒŠãƒ¼+ç®¡ç†è€…ã«ã‚¤ãƒ³ã‚¿ãƒ¼ã‚¹ãƒ†ã‚£ã‚·ãƒ£ãƒ«ï¼‰
- âœ… Google Playå…¬é–‹

**å®Œäº†æ¡ä»¶**:
- æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆç®¡ç†è€…ï¼‰ãŒå•é¡Œãªãç§»è¡Œå®Œäº†
- ãƒ¡ãƒ³ãƒãƒ¼ãŒã‚¢ãƒ—ãƒªã§ã‚·ãƒ•ãƒˆé–²è¦§å¯èƒ½
- AdMobåç›ŠãŒç™ºç”Ÿé–‹å§‹

---

#### ãƒ•ã‚§ãƒ¼ã‚º2: Webç‰ˆï¼ˆiOSãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘æ•‘æ¸ˆæªç½®ï¼‰- +2é€±é–“

**ç›®çš„**: iOSãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®æš«å®šçš„ãªå¯¾å¿œï¼ˆAdSenseåç›Šã¯æœŸå¾…ã—ãªã„ï¼‰

| ã‚¿ã‚¹ã‚¯ | æœŸé–“ | å†…å®¹ |
|--------|------|------|
| ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ | 3æ—¥ | ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ»ãƒã‚¤ã‚·ãƒ•ãƒˆç”»é¢ã®PC/ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ/ã‚¹ãƒãƒ›å¯¾å¿œ |
| ãƒ¡ãƒ³ãƒãƒ¼ç”¨UIæ§‹ç¯‰ | 3æ—¥ | é–²è¦§å°‚ç”¨ãƒ¢ãƒ¼ãƒ‰ãƒ»ä¼‘ã¿å¸Œæœ›å…¥åŠ›ç”»é¢ |
| PWAè¨­å®š | 1æ—¥ | manifest.jsonãƒ»Service Workerè¨­å®šï¼ˆåŸºæœ¬ã®ã¿ï¼‰ |
| Firebase Hostingè¨­å®š | 1æ—¥ | ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®š |
| ãƒ†ã‚¹ãƒˆ | 2æ—¥ | iOS Safariãƒ»Chromeç­‰ã§ã®å‹•ä½œç¢ºèª |
| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ | 1æ—¥ | iOSãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ãƒ»åˆ¶é™äº‹é …ã®èª¬æ˜ |
| ãƒªãƒªãƒ¼ã‚¹ | 1æ—¥ | æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»iOSå‘ã‘ã‚¢ãƒŠã‚¦ãƒ³ã‚¹ |

**å®Œäº†æ¡ä»¶**:
- iOSãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚·ãƒ•ãƒˆé–²è¦§å¯èƒ½
- PWAã§ãƒ›ãƒ¼ãƒ ç”»é¢è¿½åŠ ã§ãã‚‹ï¼ˆiOS Safariã§å‹•ä½œç¢ºèªï¼‰
- ã€ŒAndroidãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚¢ãƒ—ãƒªDLæ¨å¥¨ã€ã®å°ç·šè¨­ç½®

**æœŸå¾…åŠ¹æœ**:
- iOSãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ•‘æ¸ˆï¼ˆå…¨ä½“ã®ç´„20-30%æƒ³å®šï¼‰
- iOSç‰ˆãƒªãƒªãƒ¼ã‚¹å‰ã®ä¸€æ™‚çš„ãªå¯¾å¿œ

**é‡è¦ãªæ³¨æ„äº‹é …**:
- âš ï¸ Pushé€šçŸ¥ã¯å®Ÿè£…ã—ãªã„ï¼ˆiOS Safariã§ã¯ä¸å®‰å®šï¼‰
- âš ï¸ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ©Ÿèƒ½ã¯æœ€å°é™ï¼ˆAndroidã‚¢ãƒ—ãƒªã«èª˜å°ï¼‰
- âš ï¸ AdSenseåç›Šã¯æœŸå¾…ã—ãªã„ï¼ˆèµ¤å­—è¦šæ‚Ÿï¼‰

---

#### ãƒ•ã‚§ãƒ¼ã‚º3: iOSç‰ˆã‚¢ãƒ—ãƒªãƒªãƒªãƒ¼ã‚¹ï¼ˆå°†æ¥ï¼‰- æ¡ç®—ãƒ©ã‚¤ãƒ³åˆ°é”å¾Œ

**é–‹å§‹æ¡ä»¶**:
- Androidç‰ˆã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ•° 1,000ä»¥ä¸Š
- ã¾ãŸã¯ AdMobåç›Š æœˆ$100ä»¥ä¸Šï¼ˆ$99/å¹´ã®é–‹ç™ºè€…ç™»éŒ²è²»ãŒå›åå¯èƒ½ï¼‰
- iOSãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®è¦æœ›ãŒå¤šã„ï¼ˆWebç‰ˆã®åˆ©ç”¨å®Ÿç¸¾ã‚’å‚è€ƒï¼‰

**iOSç‰ˆã®å„ªä½æ€§**:
- ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªã®é«˜ã„UX
- App Storeã§ã®ä¿¡é ¼æ€§
- Pushé€šçŸ¥ã®ç¢ºå®Ÿãªé…ä¿¡ï¼ˆFirebase Cloud Messagingï¼‰
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ©Ÿèƒ½ã®å®Œå…¨å¯¾å¿œ
- Androidç‰ˆã¨åŒç­‰ã®æ©Ÿèƒ½æä¾›

**ãƒªãƒªãƒ¼ã‚¹å¾Œã®å¯¾å¿œ**:
- âœ… iOSç‰ˆã‚¢ãƒ—ãƒªã‚’App Storeã§å…¬é–‹
- âœ… iOSãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚¢ãƒ—ãƒªDLã‚’ä¿ƒã™
- âœ… **Webç‰ˆã‚’ã‚¯ãƒ­ãƒ¼ã‚º**ï¼ˆã¾ãŸã¯æœ€å°é™ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰ï¼‰
  - ç†ç”±: AdSenseåç›ŠãŒä½ãã€ç¶­æŒã‚³ã‚¹ãƒˆã«è¦‹åˆã‚ãªã„
  - ç§»è¡ŒæœŸé–“: 3ãƒ¶æœˆï¼ˆã‚¢ãƒŠã‚¦ãƒ³ã‚¹ â†’ ç§»è¡Œä¿ƒé€² â†’ ã‚¯ãƒ­ãƒ¼ã‚ºï¼‰

**æœŸå¾…åŠ¹æœ**:
- iOSãƒ¦ãƒ¼ã‚¶ãƒ¼ã®UXå‘ä¸Š
- AdMobåç›Šã®æ‹¡å¤§ï¼ˆiOSç‰ˆã‹ã‚‰ã‚‚åç›Šç™ºç”Ÿï¼‰
- Webç‰ˆã®ç¶­æŒã‚³ã‚¹ãƒˆå‰Šæ¸›

### 9.6 åç›ŠåŒ–æˆ¦ç•¥

```
ã€Androidç‰ˆã‚¢ãƒ—ãƒªã€‘ç®¡ç†è€…+ãƒ¡ãƒ³ãƒãƒ¼å…¨å“¡ï¼ˆãƒ¡ã‚¤ãƒ³åç›Šæºï¼‰
â”œâ”€ AdMob ãƒãƒŠãƒ¼åºƒå‘Šï¼ˆå…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¸¸æ™‚è¡¨ç¤ºï¼‰
â”œâ”€ AdMob ã‚¤ãƒ³ã‚¿ãƒ¼ã‚¹ãƒ†ã‚£ã‚·ãƒ£ãƒ«åºƒå‘Šï¼ˆç®¡ç†è€…ã®ã‚·ãƒ•ãƒˆç”Ÿæˆå¾Œï¼‰
â”œâ”€ å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼: å…¨Androidãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆç®¡ç†è€…+ãƒ¡ãƒ³ãƒãƒ¼ï¼‰
â””â”€ å°†æ¥: ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³ï¼ˆåºƒå‘Šéè¡¨ç¤ºã€$2.99/æœˆï¼‰

ã€Webç‰ˆã€‘iOSãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘æ•‘æ¸ˆæªç½®ï¼ˆåç›ŠæœŸå¾…ã—ãªã„ï¼‰
â”œâ”€ AdSenseï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€åç›Šæ¥µã‚ã¦ä½ã„ï¼‰
â”œâ”€ å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼: iOSãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ï¼ˆå…¨ä½“ã®20-30%ï¼‰
â””â”€ åŸºæœ¬èµ¤å­—è¦šæ‚Ÿã®æš«å®šå¯¾å¿œ

ã€iOSç‰ˆã‚¢ãƒ—ãƒªã€‘å°†æ¥ãƒªãƒªãƒ¼ã‚¹ï¼ˆæ¡ç®—ãƒ©ã‚¤ãƒ³åˆ°é”å¾Œï¼‰
â”œâ”€ AdMobï¼ˆAndroidç‰ˆã¨åŒç­‰ï¼‰
â”œâ”€ å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼: å…¨iOSãƒ¦ãƒ¼ã‚¶ãƒ¼
â””â”€ ãƒªãƒªãƒ¼ã‚¹å¾Œã¯Webç‰ˆã‚¯ãƒ­ãƒ¼ã‚º
```

**åç›Šäºˆæ¸¬ï¼ˆä¿®æ­£ç‰ˆï¼‰**

| ãƒ•ã‚§ãƒ¼ã‚º | å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ | åç›Šæº | æœˆé–“åç›Šï¼ˆä¿å®ˆçš„ï¼‰ |
|---------|-------------|-------|------------------|
| **ãƒ•ã‚§ãƒ¼ã‚º1** | Androidç‰ˆ<br>ï¼ˆç®¡ç†è€…+ãƒ¡ãƒ³ãƒãƒ¼ï¼‰ | AdMob | $50-100/æœˆ<br>ï¼ˆ500ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ³å®šï¼‰ |
| **ãƒ•ã‚§ãƒ¼ã‚º2** | +Webç‰ˆ<br>ï¼ˆiOSãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ | AdSense | +$5-10/æœˆ<br>ï¼ˆ100ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ³å®šï¼‰ |
| **ãƒ•ã‚§ãƒ¼ã‚º3** | +iOSç‰ˆã‚¢ãƒ—ãƒª<br>ï¼ˆiOSãƒ¦ãƒ¼ã‚¶ãƒ¼ç§»è¡Œï¼‰ | AdMob | +$30-50/æœˆ<br>ï¼ˆ150ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ³å®šï¼‰<br>Webç‰ˆã‚¯ãƒ­ãƒ¼ã‚ºã§-$10 |

**6ãƒ¶æœˆå¾Œã®ç›®æ¨™**:
- Androidç‰ˆ: 1,000ãƒ¦ãƒ¼ã‚¶ãƒ¼ Ã— $0.5/æœˆ = **$500/æœˆ**
- Webç‰ˆ: å°‘æ•°ï¼ˆiOSç‰ˆãƒªãƒªãƒ¼ã‚¹å‰ã®æš«å®šï¼‰ = **$10/æœˆ**
- **åˆè¨ˆ**: ç´„$510/æœˆï¼ˆç´„Â¥76,000/æœˆï¼‰

**iOSç‰ˆãƒªãƒªãƒ¼ã‚¹å¾Œï¼ˆ12ãƒ¶æœˆå¾Œï¼‰**:
- Androidç‰ˆ: 1,500ãƒ¦ãƒ¼ã‚¶ãƒ¼ Ã— $0.5/æœˆ = $750/æœˆ
- iOSç‰ˆ: 500ãƒ¦ãƒ¼ã‚¶ãƒ¼ Ã— $0.5/æœˆ = $250/æœˆ
- **åˆè¨ˆ**: ç´„$1,000/æœˆï¼ˆç´„Â¥150,000/æœˆï¼‰

## 11. ä»Šå¾Œã®æ‹¡å¼µï¼ˆãƒªãƒªãƒ¼ã‚¹å¾Œï¼‰
- Pushé€šçŸ¥ã«ã‚ˆã‚‹å¤‰æ›´é€šçŸ¥ï¼ˆã‚·ãƒ•ãƒˆç¢ºå®šãƒ»å¤‰æ›´æ™‚ï¼‰
- ãƒãƒ¼ãƒ æ‹›å¾…ï¼ãƒ¡ãƒ³ãƒãƒ¼ç®¡ç†æ©Ÿèƒ½ï¼ˆæ‹›å¾…ã‚³ãƒ¼ãƒ‰ç”Ÿæˆï¼‰
- åºƒå‘Šåç›Šã‚„æœ‰æ–™ç‰ˆï¼ˆåºƒå‘Šéè¡¨ç¤ºãƒ—ãƒ©ãƒ³ï¼‰
- æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µï¼ˆç”»åƒãƒ»Excelï¼‰
- é«˜åº¦ãªæ¨©é™ç®¡ç†ï¼ˆæ‰¿èªãƒ•ãƒ­ãƒ¼ã€æ¨©é™åˆ¥æ“ä½œï¼‰
- Supabaseç§»è¡Œæ¤œè¨ï¼ˆã‚³ã‚¹ãƒˆæœ€é©åŒ–ï¼‰
